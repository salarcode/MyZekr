{"version":3,"sources":["containers/ZekrList/ZekrList.tsx","common/webJsonRequestXhr.ts","services/MemoryCache.ts","services/Zekr/ZekrWebService.ts","components/ErrorMessage/ErrorMessage.tsx","components/Loading/Loading.tsx","services/Zekr/ZekrSearch.ts","containers/SiteSearch/SiteSearch.tsx","containers/Header/Header.tsx","containers/Footer/Footer.tsx","services/Storage.ts","services/Settings/settings.ts","services/Settings/models/AppSettings.ts","services/Settings/userInformation.ts","services/Settings/models/UserInformation.ts","store/Actions/SettingsActions.ts","components/VersionNumber.tsx","containers/Layout/SidebarAppDrawer.tsx","containers/AboutDialog/AboutDialog.tsx","containers/ShareItDialog/ShareItDialog.tsx","containers/Layout/Layout.tsx","components/BackButton/BackButton.tsx","services/Zekr/ZekrService.ts","containers/CategoryList/CategoryListBigIcon.tsx","containers/CategoryList/CategoryList.tsx","containers/CategoryContainer/CategoryContainer.tsx","containers/PageMeta/PageMeta.tsx","pages/HomePage/HomePage.tsx","components/Conditional/Conditional.tsx","components/DiacriticsText/DiacriticsText.tsx","components/ZekrBodyText/ZekrBodyText.tsx","containers/CategoryList/CategoryListSmallIcon.tsx","common/helpers/positionSticky.ts","containers/BookmarkZekrButton/BookmarkZekrButton.tsx","common/EnableBootstrapToast.js","containers/ZekrInlineCounter/ZekrInlineCounter.tsx","containers/TextZoomButtons/TextZoomButtons.tsx","pages/ZekrPage/ZekrPage.tsx","pages/NotFoundPage/NotFoundPage.tsx","containers/ZekrListSearchable/ZekrListSearchable.tsx","pages/ZekrCategoryPage/ZekrCategoryPage.tsx","store/Reducers/SettingsReducer.ts","store/Reducers/rootReducer.ts","pages/ZekrCounter/ZekrCounter.tsx","pages/FavoritesPage/FavoritesPage.tsx","App.tsx","store/store.ts","serviceWorker.ts","index.tsx"],"names":["ZekrList","data","onItemClick","displayRemoveButton","onRemoveClick","className","map","zekr","to","uid","key","title","shortName","onClick","imageClass","imageUrl","src","alt","fullName","e","preventDefault","onRemoveButtonClick","errorResponse","xhr","message","ok","status","statusText","headers","getAllResponseHeaders","parsedBody","undefined","webJsonRequestXhr","config","Promise","resolve","reject","XMLHttpRequest","open","method","url","accessToken","setRequestHeader","ignoreCache","timeout","onload","evt","responseText","getResponseHeader","includes","JSON","parse","parseXHRResult","onerror","console","warn","ontimeout","body","send","stringify","CacheHolder","saveCacheItem","value","retrieveCacheItem","a","toLowerCase","getZekrIndexList","then","categories","values","filter","c","category","catch","err","_getCategoryIndexList","keyName","cachedItem","response","retryType","ErrorMessage","retry","retryFunction","reloadPage","window","location","reload","Loading","searchZekrIndex","zekrIndexList","searchText","limit","result","remaining","push","SiteSearch","modalId","searchLimit","searchTimeout","useState","loading","setLoading","setZekrIndexList","setSearchText","zekrSearchResult","setZekrSearchResult","onSearchInput","event","clearTimeout","setTimeout","doSearch","val","document","getElementById","searchResult","useEffect","loadedZekrIndexList","doGetZekrList","searchModal","searchInput","addEventListener","focus","select","autoFocusInput","id","tabIndex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","onSubmit","autoFocus","onInput","onChange","onKeyDown","blur","name","placeholder","accessKey","autoComplete","htmlFor","length","click","Header","data-bs-toggle","data-bs-target","Footer","React","Component","href","saveStorageItem","localStorage","setItem","retrieveStorageItem","item","getItem","readSettingsFromServer","settings","colouredDiacritics","enableTranslations","homePage","displayFavorites","displayTodayPlan","displayTodaySuggestions","textSettings","alternateBodyFont","alternateBodyFontSize","bodyFont","bodyFontSize","benefitsFontSize","theme","isDarkMode","userFavorites","completeSettings","Object","assign","saveSettingsInServer","readUserInformationFromServer","userInfo","prayerTimesWeekly","found","latitude","longitude","elevation","ip_address","city","country","country_code","timezone","local_offset","saveUserInformationInServer","readSettingsActionCreator","dispatch","userInformation","saveSettingsActionCreator","VersionNumber","connect","store","settingsState","settingsLoading","readSettings","saveSettings","toggleSidebar","saveChanges","setColouredDiacritics","setEnableTranslations","setDisplayFavorites","setDisplayTodayPlan","setDisplayTodaySuggestions","data-bs-scroll","style","display","checked","currentTarget","AboutDialog","target","rel","ShareItDialog","pageTitle","querySelector","innerText","children","BackButton","returnUrl","doNotShowButton","h","readHistory","current","previous","pushHistory","backHistory","isUrlFromMe","referrer","URL","origin","index","indexOf","substring","invalid_url_error","removeMyOrigin","getZekrByUid","getWebZekrByUid","getZekrParentCategoryList","parent","getZekrByCategoryUid","getWebZekrByCategoryUi","getZekrCategoryByUid","find","getWebZekrCategoryByUid","getZekrCategoryChainToTopByUid","cat","parentUid","getWebZekrCategoryChainToTopByUid","getZekrCategoryChildrenByParentUid","childrenCats","getWebZekrCategoryChildrenByParentUid","CategoryListBigIcon","iconClass","CategoryList","CategoryContainer","setCategories","doGet","PageMeta","description","Helmet","content","HomePage","TextField","InputProps","endAdornment","InputAdornment","position","IconButton","role","Conditional","condition","removeAccent","str","diacritics","findNonAccentChar","searchStep","DiacriticsText","unsafeHtmlText","styles","dangerouslySetInnerHTML","__html","ZekrBodyText","lineSeparator","optional","displayOptional","setDisplayOptional","textCss","textTranslationCss","fontFamily","fontSize","optionalText","languageKey","alternateBody","alternateBodyList","altBody","CategoryListSmallIcon","detectPositionSticky","elementSelector","stickyElm","IntersectionObserver","classList","toggle","intersectionRatio","threshold","observe","bookmarked","displayToast","bodyElm","bootstrap","toastEl","toast","Toast","show","enableBootstrapToast","aria-live","aria-atomic","f","zekrUid","zekrClickStatus","zekrVibrateWarmed","ZekrInlineCounter","zekrCounts","onCloseRequested","count","setCount","countHistory","setCountHistory","increaseCount","navigator","vibrate","vibrateLong","onTouchStart","onMouseDown","i","reverse","parseFloat","alternateFontSize","history","match","setZekr","setBenefitsOpen","zekrCounterVisible","setZekrCounterVisible","params","loadedZkr","loadedCategoryChain","doGetZekr","benefits","zekrBody","source","zekrCounter","zekrBenefitsDialog","NotFoundPage","ZekrListSearchable","textBoxId","zekrList","sectionTitle","displaySearchInputLimit","size","items","getElementsByClassName","ZekrCategoryPage","setZekrList","childrenCategories","setChildrenCategories","setCategory","catParents","setCatParents","categoryUid","categoriesPromise","categoryPromise","loadedZekrList","parents","initialSettingsState","rootReducer","combineReducers","state","action","ZekrCounter","zekrFavorites","setZekrFavorites","reloadZekrFavorites","forceReload","foundZekr","fav","z","userFavList","zekrIndex","findIndex","confirm","splice","App","createStore","applyMiddleware","thunk","path","exact","component","ZekrPage","FavoritesPage","Boolean","hostname","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.4e37485b.chunk.js","sourcesContent":["import React, { FormEvent, MouseEventHandler } from 'react';\r\nimport { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport './ZekrList.scss';\r\n\r\ninterface Props {\r\n\tdata: ZekrIndex[];\r\n\tonItemClick?: MouseEventHandler<HTMLAnchorElement>;\r\n\tdisplayRemoveButton?: boolean;\r\n\tonRemoveClick?: (zekr: ZekrIndex) => void;\r\n}\r\n\r\nexport const ZekrList: FC<Props> = ({ data, onItemClick, displayRemoveButton, onRemoveClick }) => {\r\n\tfunction onRemoveButtonClick(e: any, zekr: ZekrIndex) {\r\n\t\te.preventDefault();\r\n\t\tif (onRemoveClick) onRemoveClick(zekr);\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"item-list zekr-list\">\r\n\t\t\t{data.map((zekr) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\tto={'/zekr/' + zekr.uid}\r\n\t\t\t\t\t\tkey={zekr.uid}\r\n\t\t\t\t\t\tclassName=\"item-button\"\r\n\t\t\t\t\t\ttitle={zekr.shortName}\r\n\t\t\t\t\t\tonClick={onItemClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{zekr.imageClass ? (\r\n\t\t\t\t\t\t\t<i className={zekr.imageClass || 'fa fa-search'} />\r\n\t\t\t\t\t\t) : zekr.imageUrl ? (\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tclassName=\"icon-16 mx-1 button-icon\"\r\n\t\t\t\t\t\t\t\tsrc={'/assets/icons/' + zekr.imageUrl}\r\n\t\t\t\t\t\t\t\talt={zekr.shortName}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<img className=\"icon-16 mx-1 button-icon\" src=\"/assets/icons/star.svg\" alt={zekr.shortName} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{zekr.fullName}\r\n\t\t\t\t\t\t{displayRemoveButton && (\r\n\t\t\t\t\t\t\t<button className=\"btn btn-sm float-left\" onClick={(e) => onRemoveButtonClick(e, zekr)}>\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-times\"></i>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n","export interface HttpRequest<TRQ> {\r\n\turl: string;\r\n\tmethod?: string;\r\n\tbody?: TRQ;\r\n\taccessToken?: string;\r\n\tignoreCache?: boolean;\r\n\ttimeout?: number;\r\n}\r\nexport interface HttpResponse<TRS> {\r\n\tok: boolean;\r\n\tstatus: number;\r\n\tstatusText: string;\r\n\tdata: string;\r\n\tparsedBody?: TRS;\r\n\theaders: string;\r\n}\r\n\r\nexport const defaultWebRequestTimeout = 10 * 1000;\r\n\r\nfunction parseXHRResult<TRS>(xhr: XMLHttpRequest): HttpResponse<TRS> {\r\n\treturn {\r\n\t\tok: xhr.status >= 200 && xhr.status < 300,\r\n\t\tstatus: xhr.status,\r\n\t\tstatusText: xhr.statusText,\r\n\t\theaders: xhr.getAllResponseHeaders(),\r\n\t\tdata: xhr.responseText,\r\n\t\tparsedBody: xhr.getResponseHeader('Content-Type')?.includes('json') ? (JSON.parse(xhr.responseText) as TRS) : undefined,\r\n\t};\r\n}\r\n\r\nfunction errorResponse<TRS>(xhr: XMLHttpRequest, message: string | null = null): HttpResponse<TRS> {\r\n\treturn {\r\n\t\tok: false,\r\n\t\tstatus: xhr.status,\r\n\t\tstatusText: xhr.statusText,\r\n\t\theaders: xhr.getAllResponseHeaders(),\r\n\t\tdata: message || xhr.statusText,\r\n\t\tparsedBody: undefined,\r\n\t};\r\n}\r\n\r\n/** extracted from https://gist.github.com/codecorsair/e14ec90cee91fa8f56054afaa0a39f13 */\r\nexport function webJsonRequestXhr<TRQ, TRS>(config: HttpRequest<TRQ>): Promise<HttpResponse<TRS>> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst xhr = new XMLHttpRequest();\r\n\t\txhr.open(config.method || 'get', config.url);\r\n\r\n\t\tif (config.accessToken) {\r\n\t\t\txhr.setRequestHeader('authorization', `bearer ${config.accessToken}`);\r\n\t\t}\r\n\t\tif (config.ignoreCache) {\r\n\t\t\txhr.setRequestHeader('Cache-Control', 'no-cache');\r\n\t\t}\r\n\t\tif (config.timeout) {\r\n\t\t\txhr.timeout = config.timeout;\r\n\t\t}\r\n\r\n\t\txhr.onload = (evt) => {\r\n\t\t\tresolve(parseXHRResult(xhr));\r\n\t\t};\r\n\r\n\t\txhr.onerror = (evt) => {\r\n\t\t\tconsole.warn('webJsonRequest has failed for ' + config.url, evt);\r\n\t\t\treject(errorResponse(xhr, 'Failed to make request.'));\r\n\t\t};\r\n\r\n\t\txhr.ontimeout = (evt) => {\r\n\t\t\tconsole.warn('webJsonRequest has timed out for ' + config.url, evt);\r\n\t\t\treject(errorResponse(xhr, 'Request took longer than expected.'));\r\n\t\t};\r\n\r\n\t\tif (config.method === 'post' && config.body) {\r\n\t\t\txhr.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\txhr.send(JSON.stringify(config.body));\r\n\t\t} else {\r\n\t\t\txhr.send();\r\n\t\t}\r\n\t});\r\n}\r\n","const CacheHolder: any = {};\r\n\r\nexport function saveCacheItem<T>(key: string, value: T) {\r\n\tCacheHolder[key] = value;\r\n}\r\n\r\n// retrieve\r\nexport function retrieveCacheItem<T>(key: string): T | undefined {\r\n\treturn CacheHolder[key] as T;\r\n}\r\n","import { defaultWebRequestTimeout, webJsonRequestXhr } from '../../common/webJsonRequestXhr';\r\nimport { retrieveCacheItem, saveCacheItem } from '../MemoryCache';\r\nimport { Uid } from './models/Uid';\r\nimport { Zekr, ZekrIndex } from './models/Zekr';\r\nimport { ZekrCategory } from './models/ZekrCategory';\r\n\r\n/**\r\n * Get Zekr data by its UID. [Not cached]\r\n * @param uid Zekr UID\r\n */\r\nexport function getWebZekrByUid(uid: string): Promise<Zekr | undefined> {\r\n\tif (!uid) return Promise.resolve(undefined);\r\n\tuid = uid.toLowerCase();\r\n\r\n\tlet url = `/zekr-db/zekr/${uid}.json`;\r\n\treturn new Promise((resolve, reject) => {\r\n\t\twebJsonRequestXhr<undefined, Zekr>({\r\n\t\t\turl: url,\r\n\t\t\ttimeout: defaultWebRequestTimeout,\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tvar value = response.parsedBody;\r\n\t\t\t\tresolve(value);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Get ZekrIndex list by their category UID. [cached]\r\n * @param uid Category UID\r\n */\r\nexport async function getWebZekrByCategoryUi(uid: string): Promise<ZekrIndex[] | undefined> {\r\n\tif (!uid) return Promise.resolve(undefined);\r\n\tuid = uid.toLowerCase();\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tgetZekrIndexList()\r\n\t\t\t.then((categories) => {\r\n\t\t\t\tlet values = categories?.filter((c) => c.category === uid);\r\n\t\t\t\tresolve(values);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * List of categories. [cached]\r\n */\r\nexport function getWebZekrCategoryList(): Promise<ZekrCategory[] | undefined> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t_getCategoryIndexList()\r\n\t\t\t.then((categories) => {\r\n\t\t\t\tlet values = categories?.filter((c) => !c.parent || !c.parent.length);\r\n\t\t\t\tresolve(values);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n/**\r\n * Get ZekrCategory by its UID. [cached]\r\n * @param uid Category UID\r\n */\r\nexport function getWebZekrCategoryByUid(uid: Uid): Promise<ZekrCategory | undefined> {\r\n\tif (!uid) return Promise.resolve(undefined);\r\n\tuid = uid.toLowerCase();\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t_getCategoryIndexList()\r\n\t\t\t.then((categories) => {\r\n\t\t\t\tlet value = categories?.find((c) => c.uid === uid);\r\n\t\t\t\tresolve(value);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n/**\r\n * Get ZekrCategory by its UID and then its parents. [cached]\r\n * @param uid Category UID\r\n */\r\nexport function getWebZekrCategoryChainToTopByUid(uid: Uid): Promise<ZekrCategory[] | undefined> {\r\n\tif (!uid) return Promise.resolve(undefined);\r\n\tuid = uid.toLowerCase();\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t_getCategoryIndexList()\r\n\t\t\t.then((categories) => {\r\n\t\t\t\tif (!categories) {\r\n\t\t\t\t\tresolve(undefined);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet cat = categories.find((c) => c.uid === uid);\r\n\t\t\t\tif (!cat) {\r\n\t\t\t\t\tresolve(undefined);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet result: ZekrCategory[] = [cat];\r\n\r\n\t\t\t\t// getting the top level parents\r\n\t\t\t\tif (cat.parent && cat.parent.length > 0) {\r\n\t\t\t\t\tlet parentUid: string | undefined = cat.parent[0];\r\n\t\t\t\t\twhile (parentUid) {\r\n\t\t\t\t\t\tlet parent = categories.find((c) => c.uid === parentUid);\r\n\t\t\t\t\t\tparentUid = undefined;\r\n\r\n\t\t\t\t\t\tif (parent) {\r\n\t\t\t\t\t\t\tresult.push(parent);\r\n\r\n\t\t\t\t\t\t\t// the next level parent?\r\n\t\t\t\t\t\t\tif (parent.parent && parent.parent.length > 0) {\r\n\t\t\t\t\t\t\t\tparentUid = parent.parent[0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve(result);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nexport function getWebZekrCategoryChildrenByParentUid(parentUid: string): Promise<ZekrCategory[] | undefined> {\r\n\tif (!parentUid) return Promise.resolve(undefined);\r\n\tparentUid = parentUid.toLowerCase();\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t_getCategoryIndexList()\r\n\t\t\t.then((categories) => {\r\n\t\t\t\tif (!categories) {\r\n\t\t\t\t\tresolve(undefined);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet children = categories.find((c) => c.uid === parentUid)?.children;\r\n\t\t\t\tif (children) {\r\n\t\t\t\t\tlet childrenCats = categories.filter((c) => children?.includes(c.uid) === true);\r\n\t\t\t\t\tresolve(childrenCats);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(undefined);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nfunction _getCategoryIndexList(): Promise<ZekrCategory[] | undefined> {\r\n\tlet keyName = `category-index`;\r\n\tlet cachedItem = retrieveCacheItem<ZekrCategory[]>(keyName);\r\n\tif (cachedItem) {\r\n\t\t// retrieved from cache\r\n\t\treturn Promise.resolve(cachedItem);\r\n\t}\r\n\r\n\tlet url = `/zekr-db/${keyName}.json`;\r\n\treturn new Promise((resolve, reject) => {\r\n\t\twebJsonRequestXhr<undefined, ZekrCategory[]>({\r\n\t\t\turl: url,\r\n\t\t\ttimeout: defaultWebRequestTimeout,\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tvar value = response.parsedBody;\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tsaveCacheItem(keyName, value);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(value);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nexport function getZekrIndexList(): Promise<ZekrIndex[] | undefined> {\r\n\tlet keyName = `zekr-index`;\r\n\tlet cachedItem = retrieveCacheItem<ZekrIndex[]>(keyName);\r\n\tif (cachedItem) {\r\n\t\t// retrieved from cache\r\n\t\treturn Promise.resolve(cachedItem);\r\n\t}\r\n\r\n\tlet url = `/zekr-db/${keyName}.json`;\r\n\treturn new Promise((resolve, reject) => {\r\n\t\twebJsonRequestXhr<undefined, ZekrIndex[]>({\r\n\t\t\turl: url,\r\n\t\t\ttimeout: defaultWebRequestTimeout,\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tvar value = response.parsedBody;\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tsaveCacheItem(keyName, value);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(value);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n}\r\n","import './ErrorMessage.scss';\r\nimport { FC } from 'react';\r\nimport React from 'react';\r\n\r\nexport enum retryType {\r\n\tnone,\r\n\treloadPage,\r\n\tretryFunction,\r\n}\r\n\r\ninterface Props {\r\n\tmessage?: string;\r\n\tretry?: retryType;\r\n\tretryFunction?: () => void;\r\n}\r\n\r\nexport const ErrorMessage: FC<Props> = ({ message, retry, retryFunction }) => {\r\n\tmessage = message || 'مشکلی در دریافت یا نمایش اطلاعات پیش آمده است';\r\n\r\n\tfunction onReloadPage() {\r\n\t\twindow.location.reload();\r\n\t}\r\n\tfunction onRetryFunction() {\r\n\t\tif (retryFunction) retryFunction();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"error-container alert alert-danger\">\r\n\t\t\t<h6 className=\"text-center\">{message}</h6>\r\n\t\t\t<br />\r\n\t\t\t{retry === retryType.reloadPage && (\r\n\t\t\t\t<button className=\"btn btn-sm btn-outline-danger retry\" onClick={onReloadPage}>\r\n\t\t\t\t\tبازخوانی صفحه\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{retry === retryType.retryFunction && (\r\n\t\t\t\t<button className=\"btn btn-sm btn-outline-danger retry\" onClick={onRetryFunction}>\r\n\t\t\t\t\tتلاش مجدد\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import './Loading.scss';\r\nimport { FC } from 'react';\r\nimport React from 'react';\r\n\r\nexport const Loading: FC = () => {\r\n\treturn (\r\n\t\t<div className=\"loading\">\r\n\t\t\t<div className=\"loading-ellipsis\">\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t</div>\r\n\t\t\t<div>در حال بارگذاری...</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { ZekrIndex } from './models/Zekr';\r\n\r\nexport function searchZekrIndex(zekrIndexList: ZekrIndex[], searchText: string, limit: number): ZekrIndex[] {\r\n\tvar result: ZekrIndex[] = [];\r\n\tvar remaining = limit;\r\n\r\n\tfor (const zekr of zekrIndexList) {\r\n\t\tif (zekr.fullName?.includes(searchText) || zekr.fullName?.includes(searchText)) {\r\n\t\t\tresult.push(zekr);\r\n\t\t}\r\n\t\tremaining--;\r\n\t\tif (remaining <= 0) break;\r\n\t}\r\n\treturn result;\r\n}\r\n","import React, { FC, FormEvent, FormEventHandler, KeyboardEventHandler, useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ZekrList } from '../ZekrList/ZekrList';\r\nimport { Zekr, ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport { getZekrIndexList } from '../../services/Zekr/ZekrWebService';\r\nimport { ErrorMessage, retryType } from '../../components/ErrorMessage/ErrorMessage';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { searchZekrIndex } from '../../services/Zekr/ZekrSearch';\r\n\r\ninterface Props {\r\n\tmodalId: string;\r\n\tsearchLimit?: number;\r\n}\r\n\r\nexport const SiteSearch: FC<Props> = ({ modalId, searchLimit }) => {\r\n\tvar limit = 20;\r\n\tif (searchLimit) {\r\n\t\tlimit = searchLimit;\r\n\t}\r\n\r\n\tconst [loading, setLoading] = useState<boolean>(true);\r\n\tconst [zekrIndexList, setZekrIndexList] = useState<ZekrIndex[]>([]);\r\n\tconst [searchText, setSearchText] = useState<string>('');\r\n\tconst [zekrSearchResult, setZekrSearchResult] = useState<ZekrIndex[]>([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function doGetZekrList() {\r\n\t\t\tsetLoading(true);\r\n\t\t\tlet loadedZekrIndexList = await getZekrIndexList();\r\n\r\n\t\t\tif (loadedZekrIndexList) {\r\n\t\t\t\tsetZekrIndexList(loadedZekrIndexList);\r\n\t\t\t}\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t\tdoGetZekrList();\r\n\t\tautoFocusInput();\r\n\t}, []);\r\n\r\n\tfunction onSearchSubmit(event: FormEvent) {\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tvar searchTimeout: NodeJS.Timeout;\r\n\r\n\tfunction onSearchInput(event: FormEvent<HTMLInputElement>) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif (searchTimeout) {\r\n\t\t\tclearTimeout(searchTimeout);\r\n\t\t}\r\n\t\tsearchTimeout = setTimeout(doSearch, 500);\r\n\r\n\t\t// event.target.value\r\n\t}\r\n\tfunction onSearchInputKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tif (event.key == 'Enter') {\r\n\t\t\tdoSearch();\r\n\t\t\tdocument.getElementById('site-search')?.blur();\r\n\t\t\tdocument.getElementById('search-result')?.focus();\r\n\t\t}\r\n\t}\r\n\tfunction onSearchItemClick() {\r\n\t\tdocument.getElementById('search-modal-close')?.click();\r\n\t}\r\n\r\n\tfunction doSearch() {\r\n\t\tvar val = (document.getElementById('site-search') as HTMLInputElement).value;\r\n\t\tif (!val) {\r\n\t\t\tsetSearchText(val);\r\n\t\t\tsetZekrSearchResult([]);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar searchResult = searchZekrIndex(zekrIndexList, val, limit);\r\n\r\n\t\tsetZekrSearchResult(searchResult);\r\n\t\tsetSearchText(val);\r\n\t}\r\n\r\n\tfunction autoFocusInput() {\r\n\t\tvar searchModal = document.getElementById(modalId);\r\n\t\tvar searchInput = document.getElementById('site-search') as HTMLInputElement;\r\n\r\n\t\tif (searchModal)\r\n\t\t\tsearchModal.addEventListener('shown.bs.modal', function () {\r\n\t\t\t\tif (searchInput) {\r\n\t\t\t\t\tsearchInput.focus();\r\n\t\t\t\t\tsearchInput.select();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"modal fade\" id={modalId} tabIndex={-1} aria-labelledby={modalId + '-label'} aria-hidden=\"true\">\r\n\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<h5 className=\"modal-title\" id={modalId + '-label'}>\r\n\t\t\t\t\t\t\tجستجو کلی در محتوای سایت\r\n\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t<form onSubmit={onSearchSubmit} id=\"form-site-search\" className=\"\">\r\n\t\t\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\tonInput={onSearchInput}\r\n\t\t\t\t\t\t\t\t\tonChange={onSearchInput}\r\n\t\t\t\t\t\t\t\t\tonKeyDown={onSearchInputKeyDown}\r\n\t\t\t\t\t\t\t\t\ttype=\"search\"\r\n\t\t\t\t\t\t\t\t\tname=\"search\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"عبارت جستجو را وارد کنید...\"\r\n\t\t\t\t\t\t\t\t\taccessKey=\"f\"\r\n\t\t\t\t\t\t\t\t\tid=\"site-search\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"site-search\">عبارت جستجو را وارد کنید</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<div id=\"search-result\">\r\n\t\t\t\t\t\t\t{loading && <Loading />}\r\n\t\t\t\t\t\t\t{!loading && (!zekrIndexList || !zekrIndexList.length) && (\r\n\t\t\t\t\t\t\t\t<ErrorMessage retry={retryType.reloadPage} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{searchText && !zekrSearchResult.length && (\r\n\t\t\t\t\t\t\t\t<div className=\"\">متاسفانه نتیجه ای یافت نشد. با کلمات کوتاه تر امتحان کنید.</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{zekrSearchResult && <ZekrList data={zekrSearchResult} onItemClick={onSearchItemClick} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-footer d-none d-md-flex\">\r\n\t\t\t\t\t\t<button id=\"search-modal-close\" type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\r\n\t\t\t\t\t\t\tبستن\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { SiteSearch } from '../SiteSearch/SiteSearch';\r\nimport './Header.scss';\r\n\r\nexport const Header: FC = () => {\r\n\treturn (\r\n\t\t<div className=\"site-header\">\r\n\t\t\t<button\r\n\t\t\t\tclassName=\"button button-subtle header-icon-button\"\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tdata-bs-toggle=\"offcanvas\"\r\n\t\t\t\tdata-bs-target=\"#sidebar-app-drawer\"\r\n\t\t\t>\r\n\t\t\t\t<i className=\"fas fa-bars\"></i>\r\n\t\t\t</button>\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<h2 className=\"page-title\">مرجع دعاها و اذکار</h2>\r\n\t\t\t</Link>\r\n\t\t\t<button\r\n\t\t\t\tclassName=\"button button-subtle header-icon-button\"\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tdata-bs-toggle=\"modal\"\r\n\t\t\t\tdata-bs-target=\"#site-search-modal\"\r\n\t\t\t>\r\n\t\t\t\t<i className=\"fas fa-search\"></i>\r\n\t\t\t</button>\r\n\t\t\t<SiteSearch modalId=\"site-search-modal\" />\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { FC } from 'react';\r\nimport './Footer.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Clock extends React.Component {\r\n\trender() {\r\n\t\treturn <h1>Look at the time: {new Date()}</h1>;\r\n\t}\r\n}\r\n\r\nexport const Footer: FC = () => {\r\n\treturn (\r\n\t\t<footer className=\"main-footer\">\r\n\t\t\t{/* <Link to=\".\">تعرفه های آگهی</Link> | &nbsp;\r\n\t\t\t<Link to=\".\">تماس با ما</Link> | &nbsp;\r\n\t\t\t<Link to=\".\">درباره ما</Link> */}\r\n\t\t\t<Link to=\"/\">تماس با ما</Link> | &nbsp;\r\n\t\t\t<Link to=\"/\">درباره ما</Link> | &nbsp;\r\n\t\t\t<Link to=\"/\">گزارش خطا</Link>\r\n\t\t\t<div>\r\n\t\t\t\t<span className=\"text-bold\">©</span>\r\n\t\t\t\t1399 تمامی حقوقی مادی و معنوی\r\n\t\t\t\t<a href=\"//myzekr.com/\"> MyZekr </a> محفوظ است\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t);\r\n};\r\n","import { retrieveCacheItem, saveCacheItem } from './MemoryCache';\r\n\r\n/**\r\n * Cache + Browser local storage\r\n * @param key item key\r\n */\r\nexport function saveStorageItem<T>(key: string, value: T) {\r\n\tsaveCacheItem(key, value);\r\n\tlocalStorage.setItem(key, JSON.stringify(value));\r\n}\r\n\r\n/**\r\n * Cache + Browser local storage\r\n * @param key item key\r\n */\r\nexport function retrieveStorageItem<T>(key: string): T | undefined {\r\n\tvar value = retrieveCacheItem<T>(key);\r\n\tif (value) return value;\r\n\r\n\t// we will get here on app reload or returning user\r\n\tvar item = localStorage.getItem(key);\r\n\tif (item) {\r\n\t\tvalue = JSON.parse(item) as T;\r\n\r\n\t\t// save in memory cache\r\n\t\tsaveCacheItem(key, value);\r\n\t\treturn value;\r\n\t}\r\n\treturn undefined;\r\n}\r\n","import { retrieveStorageItem, saveStorageItem } from '../Storage';\r\nimport { AppSettings, getAppSettingsInitial } from './models/AppSettings';\r\n\r\nconst AppSettingsStorageKey = 'AppSettings_Local';\r\n\r\nexport async function readSettingsFromServer(): Promise<AppSettings> {\r\n\tvar settings = await retrieveStorageItem<AppSettings>(AppSettingsStorageKey);\r\n\tif (settings == null) {\r\n\t\tsettings = getAppSettingsInitial();\r\n\t} else {\r\n\t\tlet completeSettings = getAppSettingsInitial();\r\n\r\n\t\t// making sure object structure is intact\r\n\t\tObject.assign(completeSettings, settings);\r\n\t\tsettings = completeSettings;\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\nexport async function saveSettingsInServer(settings: AppSettings) {\r\n\tawait saveStorageItem(AppSettingsStorageKey, settings);\r\n}\r\n","export interface AppSettings {\r\n\tcolouredDiacritics: boolean;\r\n\tenableTranslations: boolean;\r\n\thomePage: HomePageSettings;\r\n\ttheme: AppThemeSettings;\r\n\ttextSettings: BodyTextSettings;\r\n\tuserFavorites: UserFavoriteItem[];\r\n}\r\n\r\nexport function getAppSettingsInitial(): AppSettings {\r\n\treturn {\r\n\t\tcolouredDiacritics: true,\r\n\t\tenableTranslations: true,\r\n\t\thomePage: {\r\n\t\t\tdisplayFavorites: true,\r\n\t\t\tdisplayTodayPlan: true,\r\n\t\t\tdisplayTodaySuggestions: true,\r\n\t\t},\r\n\t\ttextSettings: {\r\n\t\t\talternateBodyFont: 'Vazir',\r\n\t\t\talternateBodyFontSize: '.8rem',\r\n\t\t\tbodyFont: 'Parastoo',\r\n\t\t\tbodyFontSize: '1.2rem',\r\n\t\t\tbenefitsFontSize: '1rem',\r\n\t\t},\r\n\t\ttheme: {\r\n\t\t\tisDarkMode: false,\r\n\t\t\tname: 'Normal',\r\n\t\t},\r\n\t\tuserFavorites: [],\r\n\t};\r\n}\r\ninterface HomePageSettings {\r\n\tdisplayFavorites: boolean;\r\n\tdisplayTodayPlan: boolean;\r\n\tdisplayTodaySuggestions: boolean;\r\n}\r\ninterface AppThemeSettings {\r\n\tisDarkMode: false;\r\n\tname: string;\r\n}\r\ninterface BodyTextSettings {\r\n\tbodyFont: string;\r\n\tbodyFontSize: string;\r\n\talternateBodyFont: string;\r\n\talternateBodyFontSize: string;\r\n\tbenefitsFontSize: string;\r\n}\r\ninterface UserFavoriteItem {\r\n\tzekrUid: string;\r\n}\r\n","import { retrieveStorageItem, saveStorageItem } from '../Storage';\r\nimport { getUserInformationInitial, UserInformation } from './models/UserInformation';\r\n\r\nconst UserInformationStorageKey = 'UserInformation_Local';\r\n\r\nexport async function readUserInformationFromServer(): Promise<UserInformation> {\r\n\tvar userInfo = await retrieveStorageItem<UserInformation>(UserInformationStorageKey);\r\n\tif (userInfo == null) {\r\n\t\tuserInfo = getUserInformationInitial();\r\n\t} else {\r\n\t\tlet completeSettings = getUserInformationInitial();\r\n\r\n\t\t// making sure object structure is intact\r\n\t\tObject.assign(completeSettings, userInfo);\r\n\t\tuserInfo = completeSettings;\r\n\t}\r\n\r\n\treturn userInfo;\r\n}\r\n\r\nexport async function saveUserInformationInServer(userInfo: UserInformation) {\r\n\tawait saveStorageItem(UserInformationStorageKey, userInfo);\r\n}\r\n","export interface UserInformation {\r\n\tprayerTimesWeekly: PrayerTime[];\r\n\tlocation: UserLocation;\r\n}\r\n\r\nexport function getUserInformationInitial(): UserInformation {\r\n\treturn {\r\n\t\tprayerTimesWeekly: [],\r\n\t\tlocation: {\r\n\t\t\tfound: false,\r\n\t\t\tlatitude: 0,\r\n\t\t\tlongitude: 0,\r\n\t\t\televation: 0,\r\n\t\t\tip_address: '',\r\n\t\t\tcity: '',\r\n\t\t\tcountry: '',\r\n\t\t\tcountry_code: '',\r\n\t\t\ttimezone: '',\r\n\t\t\tlocal_offset: 0,\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport interface PrayerTime {\r\n\ttimes: {\r\n\t\tImsak: string;\r\n\t\tFajr: string;\r\n\t\tSunrise: string;\r\n\t\tDhuhr: string;\r\n\t\tAsr: string;\r\n\t\tSunset: string;\r\n\t\tMaghrib: string;\r\n\t\tIsha: string;\r\n\t\tMidnight: string;\r\n\t};\r\n\tdate: {\r\n\t\ttimestamp: 0;\r\n\t\tgregorian: string;\r\n\t\thijri: string;\r\n\t};\r\n\t/* \r\n      {\r\n        \"times\": {\r\n          \"Imsak\": \"05:48\",\r\n          \"Sunrise\": \"07:14\",\r\n          \"Fajr\": \"05:58\",\r\n          \"Dhuhr\": \"12:20\",\r\n          \"Asr\": \"14:49\",\r\n          \"Sunset\": \"17:25\",\r\n          \"Maghrib\": \"17:28\",\r\n          \"Isha\": \"18:36\",\r\n          \"Midnight\": \"23:42\"\r\n        },\r\n        \"date\": {\r\n          \"timestamp\": 1623369600,\r\n          \"gregorian\": \"2021-06-11\",\r\n          \"hijri\": \"1442-11-01\"\r\n        }\r\n      } \r\n*/\r\n}\r\nexport interface UserLocation {\r\n\tfound: boolean;\r\n\tlatitude: number;\r\n\tlongitude: number;\r\n\televation: number;\r\n\tip_address: string;\r\n\tcity: string;\r\n\tcountry: string;\r\n\tcountry_code: string;\r\n\ttimezone: string;\r\n\tlocal_offset: number;\r\n\t/*\r\n\t\t\"location\": {\r\n\t\t\t\"latitude\": -37.814,\r\n\t\t\t\"longitude\": 144.96332,\r\n\t\t\t\"elevation\": 0,\r\n\t\t\t\"ip_address\": \"125.168.14.232\",\r\n\t\t\t\"city\": \"Melbourne\",\r\n\t\t\t\"country\": \"Australia\",\r\n\t\t\t\"country_code\": \"AU\",\r\n\t\t\t\"timezone\": \"Australia/Melbourne\",\r\n\t\t\t\"local_offset\": 10\t\t\t\r\n\t\t}\r\n\t */\r\n}\r\n","import { Action, ActionCreator, Dispatch } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { UserInformation } from '../../services/Settings/models/UserInformation';\r\nimport { readSettingsFromServer, saveSettingsInServer } from '../../services/Settings/settings';\r\nimport { readUserInformationFromServer, saveUserInformationInServer } from '../../services/Settings/userInformation';\r\n\r\nexport const Action_ReadSettings = 'ReadSettings';\r\nexport const Action_ReadingSettings = 'ReadingSettings';\r\nexport const Action_SaveSettings = 'SaveSettings';\r\nexport const Action_SavingSettings = 'SavingSettings';\r\n\r\ninterface ReadingSettingsAction extends Action<typeof Action_ReadingSettings> {}\r\ninterface ReadSettingsAction extends Action<typeof Action_ReadSettings> {\r\n\tsettings: AppSettings;\r\n\tuserInformation: UserInformation;\r\n}\r\ninterface SavingSettingsAction extends Action<typeof Action_SavingSettings> {}\r\ninterface SaveSettingsAction extends Action<typeof Action_SaveSettings> {}\r\n\r\nexport type SettingsActions = ReadSettingsAction | SaveSettingsAction | ReadingSettingsAction | SavingSettingsAction;\r\n\r\nexport const readSettingsActionCreator: ActionCreator<ThunkAction<Promise<void>, object, object, ReadSettingsAction>> = () => {\r\n\treturn async (dispatch: Dispatch) => {\r\n\t\tconst readingSettingsAction: ReadingSettingsAction = {\r\n\t\t\ttype: Action_ReadingSettings,\r\n\t\t};\r\n\r\n\t\tdispatch(readingSettingsAction);\r\n\r\n\t\t// TODO - get the questions from server\r\n\t\tconst settings = await readSettingsFromServer();\r\n\t\tconst userInformation = await readUserInformationFromServer();\r\n\r\n\t\t// TODO - dispatch the GotUnansweredQuestions action\r\n\t\tconst readSettingsAction: ReadSettingsAction = {\r\n\t\t\ttype: Action_ReadSettings,\r\n\t\t\tsettings: settings,\r\n\t\t\tuserInformation: userInformation,\r\n\t\t};\r\n\t\tdispatch(readSettingsAction);\r\n\t};\r\n};\r\n\r\nexport const saveSettingsActionCreator: ActionCreator<ThunkAction<Promise<void>, object, object, SaveSettingsAction>> = (\r\n\tsettings: AppSettings,\r\n\tuserInfo: UserInformation | undefined,\r\n) => {\r\n\treturn async (dispatch: Dispatch) => {\r\n\t\tconst savingSettingsAction: SavingSettingsAction = {\r\n\t\t\ttype: Action_SavingSettings,\r\n\t\t};\r\n\t\tdispatch(savingSettingsAction);\r\n\r\n\t\t// TODO - get the questions from server\r\n\t\tawait saveSettingsInServer(settings);\r\n\t\tif (userInfo) {\r\n\t\t\tawait saveUserInformationInServer(userInfo);\r\n\t\t}\r\n\r\n\t\t// TODO - dispatch the GotUnansweredQuestions action\r\n\t\tconst saveSettingsAction: SaveSettingsAction = {\r\n\t\t\ttype: Action_SaveSettings,\r\n\t\t};\r\n\t\tdispatch(saveSettingsAction);\r\n\t};\r\n};\r\n","import { FC } from 'react';\r\nimport React from 'react';\r\n\r\nexport const VersionNumber: FC = () => {\r\n\treturn <span>0.0.1</span>;\r\n};\r\n","import './SidebarAppDrawer.scss';\r\nimport React, { FC, Fragment, MouseEventHandler, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Zekr } from '../../services/Zekr/models/Zekr';\r\nimport { VersionNumber } from '../../components/VersionNumber';\r\nimport { AboutDialog } from '../AboutDialog/AboutDialog';\r\nimport { connect } from 'react-redux';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AppState } from '../../store/store';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { readSettingsActionCreator, saveSettingsActionCreator } from '../../store/Actions/SettingsActions';\r\nimport { AnyAction } from 'redux';\r\n\r\ninterface Props {\r\n\tsettings?: AppSettings;\r\n\tsettingsLoading: boolean;\r\n\tsaveSettings: (settings: AppSettings) => void;\r\n}\r\n\r\nconst SidebarAppDrawer: FC<Props> = ({ settingsLoading, settings, saveSettings }) => {\r\n\tfunction toggleSidebar() {\r\n\t\tdocument.getElementById('toggle-sidebar-app-drawer')?.click();\r\n\t}\r\n\tfunction displayAbout(e: any) {\r\n\t\te.preventDefault();\r\n\t\ttoggleSidebar();\r\n\t\tdocument.getElementById('toggle-about-modal')?.click();\r\n\t}\r\n\tfunction displayShareLink(e: any) {\r\n\t\te.preventDefault();\r\n\t\ttoggleSidebar();\r\n\t\tdocument.getElementById('toggle-shareit-modal')?.click();\r\n\t}\r\n\tfunction saveChanges() {\r\n\t\tif (settings) saveSettings(settings);\r\n\t}\r\n\tconst [colouredDiacritics, setColouredDiacritics] = useState(settings?.colouredDiacritics);\r\n\tconst [enableTranslations, setEnableTranslations] = useState(settings?.enableTranslations);\r\n\tconst [displayFavorites, setDisplayFavorites] = useState(settings?.homePage.displayFavorites);\r\n\tconst [displayTodayPlan, setDisplayTodayPlan] = useState(settings?.homePage.displayTodayPlan);\r\n\tconst [displayTodaySuggestions, setDisplayTodaySuggestions] = useState(settings?.homePage.displayTodaySuggestions);\r\n\r\n\tif (!settingsLoading && settings) {\r\n\t\t// update in each render\r\n\t\tif (colouredDiacritics != settings?.colouredDiacritics) {\r\n\t\t\tsetColouredDiacritics(settings?.colouredDiacritics);\r\n\t\t}\r\n\t\tif (enableTranslations != settings?.enableTranslations) {\r\n\t\t\tsetEnableTranslations(settings?.enableTranslations);\r\n\t\t}\r\n\t\tif (displayFavorites != settings?.homePage.displayFavorites) {\r\n\t\t\tsetDisplayFavorites(settings?.homePage.displayFavorites);\r\n\t\t}\r\n\t\tif (displayTodayPlan != settings?.homePage.displayTodayPlan) {\r\n\t\t\tsetDisplayTodayPlan(settings?.homePage.displayTodayPlan);\r\n\t\t}\r\n\t\tif (displayTodaySuggestions != settings?.homePage.displayTodaySuggestions) {\r\n\t\t\tsetDisplayTodaySuggestions(settings?.homePage.displayTodaySuggestions);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"offcanvas offcanvas-start\"\r\n\t\t\ttabIndex={-1}\r\n\t\t\tid=\"sidebar-app-drawer\"\r\n\t\t\taria-labelledby=\"sidebar-app-drawer-title\"\r\n\t\t\tdata-bs-scroll=\"false\"\r\n\t\t>\r\n\t\t\t<button\r\n\t\t\t\tid=\"toggle-sidebar-app-drawer\"\r\n\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\tdata-bs-toggle=\"offcanvas\"\r\n\t\t\t\tdata-bs-target=\"#sidebar-app-drawer\"\r\n\t\t\t/>\r\n\t\t\t<div className=\"offcanvas-header\">\r\n\t\t\t\t<button type=\"button\" className=\"btn-close text-reset\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"offcanvas-body\">\r\n\t\t\t\t<div className=\"drawer-logo\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#sidebar-app-drawer\">\r\n\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t<img className=\"logo\" src=\"/android-chrome-512x512.png\" alt=\"MyZekr\" />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-check form-switch\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-check-input\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tid=\"chkColouredDiacritics\"\r\n\t\t\t\t\t\tchecked={colouredDiacritics}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tif (settings) {\r\n\t\t\t\t\t\t\t\tsettings.colouredDiacritics = e.currentTarget.checked;\r\n\t\t\t\t\t\t\t\tsaveChanges();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetColouredDiacritics(e.currentTarget.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"form-check-label\" htmlFor=\"chkColouredDiacritics\">\r\n\t\t\t\t\t\tحرکه گذاری رنگی\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-check form-switch\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-check-input\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tid=\"chkEnableTranslations\"\r\n\t\t\t\t\t\tchecked={enableTranslations}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tif (settings) {\r\n\t\t\t\t\t\t\t\tsettings.enableTranslations = e.currentTarget.checked;\r\n\t\t\t\t\t\t\t\tsaveChanges();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetEnableTranslations(e.currentTarget.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"form-check-label\" htmlFor=\"chkEnableTranslations\">\r\n\t\t\t\t\t\tنمایش ترجمه\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\r\n\t\t\t\t<div className=\"form-check form-switch\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-check-input\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tid=\"chkDisplayFavorites\"\r\n\t\t\t\t\t\tchecked={displayFavorites}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tif (settings) {\r\n\t\t\t\t\t\t\t\tsettings.homePage.displayFavorites = e.currentTarget.checked;\r\n\t\t\t\t\t\t\t\tsaveChanges();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetDisplayFavorites(e.currentTarget.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"form-check-label\" htmlFor=\"chkDisplayFavorites\">\r\n\t\t\t\t\t\tنمایش منتخب ها\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-check form-switch\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-check-input\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tid=\"chkDisplayTodayPlan\"\r\n\t\t\t\t\t\tchecked={settings?.homePage.displayTodayPlan}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tif (settings) {\r\n\t\t\t\t\t\t\t\tsettings.homePage.displayTodayPlan = e.currentTarget.checked;\r\n\t\t\t\t\t\t\t\tsaveChanges();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetDisplayTodayPlan(e.currentTarget.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"form-check-label\" htmlFor=\"chkDisplayTodayPlan\">\r\n\t\t\t\t\t\tنمایش برنامه امروز\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-check form-switch\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-check-input\"\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tid=\"chkDisplayTodaySuggestions\"\r\n\t\t\t\t\t\tchecked={settings?.homePage.displayTodaySuggestions}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tif (settings) {\r\n\t\t\t\t\t\t\t\tsettings.homePage.displayTodaySuggestions = e.currentTarget.checked;\r\n\t\t\t\t\t\t\t\tsaveChanges();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetDisplayTodaySuggestions(e.currentTarget.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"form-check-label\" htmlFor=\"chkDisplayTodaySuggestions\">\r\n\t\t\t\t\t\tنمایش پیشنهاد امروز\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<div className=\"link-item\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#sidebar-app-drawer\">\r\n\t\t\t\t\t<Link to=\"/counter\">\r\n\t\t\t\t\t\t<span className=\"link-icon text-danger\">\r\n\t\t\t\t\t\t\t<img src=\"/assets/icons/tasbih.svg\" alt=\".\" className=\"icon-20\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\tذکر شمار\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"link-item\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#sidebar-app-drawer\">\r\n\t\t\t\t\t<Link to=\"/favorites\">\r\n\t\t\t\t\t\t<span className=\"link-icon text-danger\">\r\n\t\t\t\t\t\t\t<i className=\"fas fa-heart fa-lg\"></i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\tلیست علاقه مندی ها\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<div className=\"link-item \">\r\n\t\t\t\t\t<Link to=\"#\" onClick={displayShareLink}>\r\n\t\t\t\t\t\t<span className=\"link-icon\">\r\n\t\t\t\t\t\t\t<i className=\"fas fa-share-alt\"></i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\tپیشنهاد به دوستان\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"link-item \">\r\n\t\t\t\t\t<Link to=\"#\" onClick={displayAbout}>\r\n\t\t\t\t\t\t<span className=\"link-icon\">\r\n\t\t\t\t\t\t\t<i className=\"fas fa-info-circle\"></i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\tدرباره\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"link-item text-center text-secondary form-text\">\r\n\t\t\t\t\tنسخه: <VersionNumber />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (store: AppState) => {\r\n\treturn {\r\n\t\tsettings: store.settingsState.settings,\r\n\t\tsettingsLoading: store.settingsState.loading,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n\treturn {\r\n\t\treadSettings: () => dispatch(readSettingsActionCreator()),\r\n\t\tsaveSettings: (settings: AppSettings) => dispatch(saveSettingsActionCreator(settings)),\r\n\t};\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarAppDrawer);\r\n","import React, { FC, FormEvent, FormEventHandler, Fragment, KeyboardEventHandler, useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ZekrList } from '../ZekrList/ZekrList';\r\nimport { Zekr, ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport { getZekrIndexList } from '../../services/Zekr/ZekrWebService';\r\nimport { ErrorMessage, retryType } from '../../components/ErrorMessage/ErrorMessage';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { searchZekrIndex } from '../../services/Zekr/ZekrSearch';\r\n\r\ninterface Props {}\r\n\r\nexport const AboutDialog: FC<Props> = ({}) => {\r\n\treturn (\r\n\t\t<div className=\"modal fade\" id=\"about-modal\" tabIndex={-1} aria-labelledby=\"about-modal-label\" aria-hidden=\"true\">\r\n\t\t\t<button id=\"toggle-about-modal\" style={{ display: 'none' }} data-bs-toggle=\"modal\" data-bs-target=\"#about-modal\" />\r\n\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"about-modal-label\">\r\n\t\t\t\t\t\t\tدرباره مرجع دعاها و اذکار\r\n\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tدر اینجا سعی می کنیم که مرجعی برای دعاها، اذکار و اعمال عبادی رو جمع کنیم. به امید داشتن یک منبع برای\r\n\t\t\t\t\t\t\tهمه چی.\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\tاین سایت و اطلاعات آن کد منبع آزاد بوده و رایگان است و از{' '}\r\n\t\t\t\t\t\t\t<a href=\"https://github.com/salarcode/myzekr\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc=\"https://github.githubassets.com/pinned-octocat.svg\"\r\n\t\t\t\t\t\t\t\t\talt=\"github\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"icon-13 m-1\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\tاینجا &nbsp;\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\tقابل دریافت است.\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\tمحتاج دعای شما عزیزان.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-footer d-none d-md-flex\">\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\r\n\t\t\t\t\t\t\tبستن\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { FC, FormEvent, FormEventHandler, Fragment, KeyboardEventHandler, useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ZekrList } from '../ZekrList/ZekrList';\r\nimport { Zekr, ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport { getZekrIndexList } from '../../services/Zekr/ZekrWebService';\r\nimport { ErrorMessage, retryType } from '../../components/ErrorMessage/ErrorMessage';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { searchZekrIndex } from '../../services/Zekr/ZekrSearch';\r\nimport './ShareItDialog.scss';\r\n\r\ninterface Props {}\r\n\r\nexport const ShareItDialog: FC<Props> = ({}) => {\r\n\tvar pageTitle = (document.querySelector('head title') as any)?.innerText;\r\n\tvar url = document.location;\r\n\r\n\treturn (\r\n\t\t<div className=\"modal fade\" id=\"shareit-modal\" tabIndex={-1} aria-labelledby=\"shareit-modal-label\" aria-hidden=\"true\">\r\n\t\t\t<button\r\n\t\t\t\tid=\"toggle-shareit-modal\"\r\n\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\tdata-bs-toggle=\"modal\"\r\n\t\t\t\tdata-bs-target=\"#shareit-modal\"\r\n\t\t\t/>\r\n\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"shareit-modal-label\">\r\n\t\t\t\t\t\t\t<i className=\"fas fa-share-alt\"></i>&nbsp; اشتراک گذاری با دوستان\r\n\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\trel=\"nofollow\"\r\n\t\t\t\t\t\t\t\thref={'https://telegram.me/share/url?url=' + url}\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-light\"\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className=\"fab fa-telegram text-info\"></i>{' '}\r\n\t\t\t\t\t\t\t\t<span className=\"hidden-sm hidden-xs text-dark\">تلگرام</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\trel=\"nofollow\"\r\n\t\t\t\t\t\t\t\thref={`whatsapp://send?text=${pageTitle} - ${url}`}\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-light\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className=\"fab fa-whatsapp text-success\"></i>{' '}\r\n\t\t\t\t\t\t\t\t<span className=\"hidden-sm hidden-xs text-dark\">WhatsApp</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<a rel=\"nofollow\" href={`mailto:?subject=${pageTitle}&body=${url}`} className=\"btn btn-outline-light\">\r\n\t\t\t\t\t\t\t\t<i className=\"far fa-envelope text-primary\"></i>{' '}\r\n\t\t\t\t\t\t\t\t<span className=\"hidden-sm hidden-xs text-dark\">ایمیل</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={`https://twitter.com/home?status=${pageTitle}+${url}`}\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-light\"\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className=\"fab fa-twitter text-info\"></i>{' '}\r\n\t\t\t\t\t\t\t\t<span className=\"hidden-sm hidden-xs text-dark\">توییتر</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-footer d-none d-md-flex\">\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\r\n\t\t\t\t\t\t\tبستن\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import './Layout.scss';\r\nimport React, { FC, useEffect, useState } from 'react';\r\nimport { Header } from '../Header/Header';\r\nimport { Footer } from '../Footer/Footer';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AnyAction } from 'redux';\r\nimport { readSettingsActionCreator } from '../../store/Actions/SettingsActions';\r\nimport { AppState } from '../../store/store';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { connect } from 'react-redux';\r\nimport SidebarAppDrawer from './SidebarAppDrawer';\r\nimport { AboutDialog } from '../AboutDialog/AboutDialog';\r\nimport { ShareItDialog } from '../ShareItDialog/ShareItDialog';\r\n\r\ninterface Props {\r\n\tsettings?: AppSettings | undefined;\r\n\tsettingsLoading?: boolean;\r\n\treadSettings: () => Promise<void>;\r\n}\r\n\r\nconst Layout: FC<Props> = ({ children, settings, readSettings, settingsLoading = false }) => {\r\n\tuseEffect(() => {\r\n\t\t// Warning: this is the only place we load the settings, don't touch!\r\n\t\tif (readSettings) readSettings();\r\n\t}, [readSettings]);\r\n\r\n\treturn (\r\n\t\t<div className=\"layout block-container\">\r\n\t\t\t<div className=\"site-header-row\">\r\n\t\t\t\t<Header />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"content-layout-row\">\r\n\t\t\t\t<div className=\"content-layout block-container\">{children}</div>\r\n\t\t\t\t<AboutDialog />\r\n\t\t\t\t<ShareItDialog />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<SidebarAppDrawer />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (store: AppState) => {\r\n\treturn {\r\n\t\tsettings: store.settingsState.settings,\r\n\t\tsettingsLoading: store.settingsState.loading,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n\treturn {\r\n\t\treadSettings: () => dispatch(readSettingsActionCreator()),\r\n\t};\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);\r\n","import React, { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { retrieveStorageItem, saveStorageItem } from '../../services/Storage';\r\n\r\ninterface Props {\r\n\treturnUrl?: string;\r\n\tdoNotShowButton?: boolean;\r\n}\r\n\r\nexport const BackButton: FC<Props> = ({ returnUrl, doNotShowButton }) => {\r\n\t// always saving current state\r\n\tpushHistory(window.location.href);\r\n\r\n\t// just record history?\r\n\tif (doNotShowButton === true) return null;\r\n\r\n\tvar backHistory = readHistory();\r\n\r\n\tvar url = returnUrl;\r\n\tif (!url) {\r\n\t\tif (backHistory && backHistory.previous) {\r\n\t\t\tif (isUrlFromMe(backHistory.previous)) {\r\n\t\t\t\turl = backHistory.previous;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!url && isReferredFromMe()) {\r\n\t\t\turl = document.referrer;\r\n\t\t}\r\n\t}\r\n\t//DEBUG: console.log('BackButton', backHistory, url);\r\n\tif (!url) {\r\n\t\t// do not display the button\r\n\t\treturn null;\r\n\t}\r\n\tif (url == window.location.href) return null;\r\n\r\n\turl = removeMyOrigin(url);\r\n\r\n\treturn (\r\n\t\t<Link title=\"بازگشت\" to={url} key={url} className=\"px-1\">\r\n\t\t\t<img alt=\"بازگشت\" src=\"/assets/icons/back.svg\" className=\"icon-20 link-image\" />\r\n\t\t</Link>\r\n\t);\r\n};\r\n\r\nfunction pushHistory(url: string) {\r\n\tvar h = readHistory();\r\n\tif (!h) {\r\n\t\th = { current: url, previous: '' };\r\n\t} else {\r\n\t\t// don't override current if they're are same\r\n\t\tif (url == h.current) return;\r\n\t\th = {\r\n\t\t\tprevious: h.current,\r\n\t\t\tcurrent: url,\r\n\t\t};\r\n\t}\r\n\tsaveStorageItem('BackButton-History', h);\r\n}\r\nfunction readHistory() {\r\n\treturn retrieveStorageItem<{ current: string; previous: string }>('BackButton-History');\r\n}\r\n\r\nfunction isReferredFromMe() {\r\n\treturn isUrlFromMe(document.referrer);\r\n}\r\nfunction isUrlFromMe(url: string) {\r\n\ttry {\r\n\t\tconst referrer = new URL(url);\r\n\t\treturn referrer.origin === window.location.origin;\r\n\t} catch (invalid_url_error) {\r\n\t\treturn false;\r\n\t}\r\n}\r\nfunction removeMyOrigin(url: string) {\r\n\ttry {\r\n\t\tconst referrer = new URL(url);\r\n\t\tif (referrer.origin === window.location.origin) {\r\n\t\t\tvar index = url.indexOf(referrer.origin);\r\n\t\t\treturn url.substring(index + referrer.origin.length, url.length - index);\r\n\t\t} else {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t} catch (invalid_url_error) {\r\n\t\treturn url;\r\n\t}\r\n}\r\n","import { Zekr, ZekrIndex } from './models/Zekr';\r\nimport { ZekrCategory } from './models/ZekrCategory';\r\nimport {\r\n\tgetWebZekrByCategoryUi,\r\n\tgetWebZekrByUid,\r\n\tgetWebZekrCategoryByUid,\r\n\tgetWebZekrCategoryChainToTopByUid,\r\n\tgetWebZekrCategoryChildrenByParentUid,\r\n\tgetWebZekrCategoryList as getWebZekrParentCategoryList,\r\n} from './ZekrWebService';\r\n\r\nexport function getZekrByUid(uid: string): Promise<Zekr | undefined> {\r\n\treturn getWebZekrByUid(uid);\r\n}\r\n\r\nexport function getZekrParentCategoryList(): Promise<ZekrCategory[] | undefined> {\r\n\treturn getWebZekrParentCategoryList();\r\n}\r\n\r\nexport function getZekrByCategoryUid(uid: string): Promise<ZekrIndex[] | undefined> {\r\n\treturn getWebZekrByCategoryUi(uid);\r\n}\r\n\r\nexport function getZekrCategoryByUid(uid: string): Promise<ZekrCategory | undefined> {\r\n\treturn getWebZekrCategoryByUid(uid);\r\n}\r\nexport function getZekrCategoryChainToTopByUid(uid: string): Promise<ZekrCategory[] | undefined> {\r\n\treturn getWebZekrCategoryChainToTopByUid(uid);\r\n}\r\n\r\nexport function getZekrCategoryChildrenByParentUid(parentUid: string): Promise<ZekrCategory[] | undefined> {\r\n\treturn getWebZekrCategoryChildrenByParentUid(parentUid);\r\n}\r\n\r\n// export function getUserFavorites(){\r\n\r\n// }\r\n","import './CategoryList.scss';\r\nimport React, { Fragment } from 'react';\r\nimport { FC } from 'react';\r\nimport { ZekrCategory } from '../../services/Zekr/models/ZekrCategory';\r\n\r\ninterface Props {\r\n\tcategory: ZekrCategory;\r\n}\r\n\r\nexport const CategoryListBigIcon: FC<Props> = ({ category }) => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{category.iconClass ? (\r\n\t\t\t\t<i className={(category.iconClass || 'fa fa-search') + ' button-icon'} />\r\n\t\t\t) : category.imageUrl ? (\r\n\t\t\t\t<img className=\"icon-24 button-icon mx-1\" src={'/assets/icons/' + category.imageUrl} alt={category.title} />\r\n\t\t\t) : (\r\n\t\t\t\t<img className=\"icon-24 button-icon mx-1\" src=\"/assets/icons/star.svg\" alt={category.title} />\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import './CategoryList.scss';\r\nimport React from 'react';\r\nimport { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ZekrCategory } from '../../services/Zekr/models/ZekrCategory';\r\nimport { CategoryListBigIcon } from './CategoryListBigIcon';\r\n\r\ninterface Props {\r\n\tdata: ZekrCategory[];\r\n}\r\n\r\nexport const CategoryList: FC<Props> = ({ data }) => {\r\n\treturn (\r\n\t\t<div className=\"category-list\">\r\n\t\t\t{data.map((category) => (\r\n\t\t\t\t<Link className=\"category-button\" to={'/zekr-list/' + category.uid} key={category.uid}>\r\n\t\t\t\t\t<CategoryListBigIcon category={category} />\r\n\t\t\t\t\t<div className=\"button-text\">{category.title}</div>\r\n\t\t\t\t</Link>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { ZekrCategory } from '../../services/Zekr/models/ZekrCategory';\r\nimport { getZekrParentCategoryList } from '../../services/Zekr/ZekrService';\r\nimport { CategoryList } from '../CategoryList/CategoryList';\r\n\r\nexport const CategoryContainer: FC = () => {\r\n\tconst [loading, setLoading] = useState<boolean>(true);\r\n\tconst [categories, setCategories] = useState<ZekrCategory[]>([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function doGet() {\r\n\t\t\tsetLoading(true);\r\n\t\t\tlet data = await getZekrParentCategoryList().catch((err) => {\r\n\t\t\t\tconsole.warn('Failed to read CategoryList', err);\r\n\t\t\t});\r\n\t\t\tif (data) {\r\n\t\t\t\tsetCategories(data);\r\n\t\t\t}\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t\tdoGet();\r\n\t}, []);\r\n\r\n\treturn loading ? <Loading /> : <CategoryList data={categories} />;\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport { Link } from 'react-router-dom';\r\nimport { Zekr } from '../../services/Zekr/models/Zekr';\r\n\r\ninterface Props {\r\n\ttitle: string;\r\n\tdescription: string;\r\n}\r\n\r\nexport const PageMeta: FC<Props> = ({ title, description }) => {\r\n\treturn (\r\n\t\t<Helmet>\r\n\t\t\t<title>{title && title + ' - '} مرجع دعاها و اذکار</title>\r\n\t\t\t<meta name=\"description\" content={description ? description : title} />\r\n\t\t</Helmet>\r\n\t);\r\n};\r\n","import { IconButton, InputAdornment, TextField } from '@material-ui/core';\r\nimport React, { FC } from 'react';\r\nimport { BackButton } from '../../components/BackButton/BackButton';\r\nimport { CategoryContainer } from '../../containers/CategoryContainer/CategoryContainer';\r\nimport { PageMeta } from '../../containers/PageMeta/PageMeta';\r\nimport './HomePage.scss';\r\n\r\nexport const HomePage: FC = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PageMeta title=\"خوش آمدید\" description=\"سایت مرجع دعاها و اذکار\" />\r\n\t\t\t<main className=\"text-center\">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<strong>به سایت مرجع دعاها و اذکار خوش آمدید</strong>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tدر اینجا سعی می کنیم که مرجعی برای دعاها، اذکار و اعمال عبادی رو جمع کنیم. به امید داشتن یک منبع برای همه چی.\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tاین سایت و اطلاعات آن کد منبع آزاد بوده و رایگان است و از{' '}\r\n\t\t\t\t\t<a href=\"https://github.com/salarcode/myzekr\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">\r\n\t\t\t\t\t\t<img src=\"https://github.githubassets.com/pinned-octocat.svg\" alt=\"github\" className=\"icon-13 m-1\" />\r\n\t\t\t\t\t\tاینجا &nbsp;\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\tقابل دریافت است.\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tمحتاج دعای شما عزیزان.\r\n\t\t\t\t</p>\r\n\t\t\t\t<BackButton doNotShowButton={true} />\r\n\t\t\t</main>\r\n\t\t\t<section className=\"main-section main-search-bar\">\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName=\"search-input\"\r\n\t\t\t\t\tid=\"homepage-main-search\"\r\n\t\t\t\t\tplaceholder=\"جستجو در میان اذکار\"\r\n\t\t\t\t\tdata-bs-toggle=\"modal\"\r\n\t\t\t\t\tdata-bs-target=\"#site-search-modal\"\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t\t<span role=\"img\">🔍</span>\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"main-section\">\r\n\t\t\t\t<h3 className=\"main-section-title\">\r\n\t\t\t\t\t<span>⭐</span>\r\n\t\t\t\t\tانتخاب دسته بندی دعا ها\r\n\t\t\t\t</h3>\r\n\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t<CategoryContainer />\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { FC, Fragment } from 'react';\r\n\r\ninterface Props {\r\n\tcondition: boolean;\r\n}\r\n\r\nexport const Conditional: FC<Props> = ({ condition, children }) => {\r\n\treturn <Fragment>{condition && children}</Fragment>;\r\n};\r\n","import './DiacriticsText.scss';\r\nimport React, { CSSProperties, FC } from 'react';\r\n\r\ninterface Props {\r\n\tunsafeHtmlText: string;\r\n\tstyles?: CSSProperties;\r\n\tcolouredDiacritics?: boolean;\r\n}\r\n\r\nfunction removeAccent(str: string): string {\r\n\tif (!str) return str;\r\n\tvar diacritics = ['ً', 'ٌ', 'ٍ', 'َ', 'ُ', 'ِ', 'ّ', 'ْ'];\r\n\r\n\tvar result = '';\r\n\tfor (let index = 0; index < str.length; index++) {\r\n\t\tconst c = str[index];\r\n\t\tif (diacritics.indexOf(c) === -1) result += c;\r\n\t\telse {\r\n\t\t\t// keeping tashdid on allah word\r\n\t\t\tif (\r\n\t\t\t\tc === 'ّ' /* tashdid */ &&\r\n\t\t\t\tfindNonAccentChar(str, index, -1) === 'ل' &&\r\n\t\t\t\tfindNonAccentChar(str, index, +1) === 'ه'\r\n\t\t\t) {\r\n\t\t\t\tresult += c;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findNonAccentChar(str: string, index: number, searchStep: number): string | undefined {\r\n\t\tindex += searchStep;\r\n\r\n\t\twhile (str.length > index || index < 0) {\r\n\t\t\tconst c = str[index];\r\n\t\t\tif (diacritics.indexOf(c) === -1) return c;\r\n\r\n\t\t\tindex += searchStep;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\n/**\r\n * Display accent chars in different color\r\n * @param param0 the html text\r\n */\r\nexport const DiacriticsText: FC<Props> = ({ unsafeHtmlText, styles, colouredDiacritics }) => {\r\n\tif (colouredDiacritics)\r\n\t\treturn (\r\n\t\t\t<div className=\"diacritics-text\" style={styles}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"diacritics-org\"\r\n\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: unsafeHtmlText,\r\n\t\t\t\t\t}}\r\n\t\t\t\t></div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"diacritics-plain no-pointer-events\"\r\n\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: removeAccent(unsafeHtmlText),\r\n\t\t\t\t\t}}\r\n\t\t\t\t></div>\r\n\t\t\t</div>\r\n\t\t);\r\n\telse\r\n\t\treturn (\r\n\t\t\t<div className=\"diacritics-text\" style={styles}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"diacritics-simple\"\r\n\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: unsafeHtmlText,\r\n\t\t\t\t\t}}\r\n\t\t\t\t></div>\r\n\t\t\t</div>\r\n\t\t);\r\n};\r\n","import './ZekrBodyText.scss';\r\nimport React, { FC, useState } from 'react';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { ZekrBody } from '../../services/Zekr/models/ZekrBody';\r\nimport { Conditional } from '../Conditional/Conditional';\r\nimport { DiacriticsText } from '../DiacriticsText/DiacriticsText';\r\n\r\ninterface Props {\r\n\tbody: ZekrBody | undefined;\r\n\tlineSeparator?: boolean;\r\n\tsettings?: AppSettings;\r\n}\r\n\r\nexport const ZekrBodyText: FC<Props> = ({ body, lineSeparator = true, settings }) => {\r\n\tconst useDiacriticsTextLang = 'ar';\r\n\tconst [displayOptional, setDisplayOptional] = useState(body?.optional ?? false);\r\n\r\n\tif (!body) return null;\r\n\r\n\tlet textCss = {};\r\n\tlet textTranslationCss = {};\r\n\r\n\tif (settings) {\r\n\t\ttextCss = {\r\n\t\t\tfontFamily: settings.textSettings.bodyFont,\r\n\t\t\tfontSize: settings.textSettings.bodyFontSize,\r\n\t\t};\r\n\t\ttextTranslationCss = {\r\n\t\t\tfontFamily: settings.textSettings.alternateBodyFont,\r\n\t\t\tfontSize: settings.textSettings.alternateBodyFontSize,\r\n\t\t};\r\n\t}\r\n\tfunction optionalButtonClick() {\r\n\t\tsetDisplayOptional(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"zekr-body\">\r\n\t\t\t{displayOptional && (\r\n\t\t\t\t<button type=\"button\" className=\"btn btn-sm btn-outline-success\" onClick={optionalButtonClick}>\r\n\t\t\t\t\t{body.optionalText || '...'}\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t<div className=\"zekr-body-wrapper\" style={displayOptional ? { display: 'none' } : {}}>\r\n\t\t\t\t{body.languageKey === useDiacriticsTextLang ? (\r\n\t\t\t\t\t<DiacriticsText\r\n\t\t\t\t\t\tunsafeHtmlText={body.body}\r\n\t\t\t\t\t\tstyles={textCss}\r\n\t\t\t\t\t\tcolouredDiacritics={settings?.colouredDiacritics}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"zekr-body-text\"\r\n\t\t\t\t\t\tstyle={textTranslationCss}\r\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t__html: body.body,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Conditional condition={body.alternateBody != null}>\r\n\t\t\t\t\t<div className=\"zekr-body-alternative\">\r\n\t\t\t\t\t\t<ZekrBodyText body={body.alternateBody} lineSeparator={false} settings={settings} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Conditional>\r\n\t\t\t\t<Conditional condition={body.alternateBodyList != null && body.alternateBodyList.length > 0}>\r\n\t\t\t\t\t<div className=\"zekr-body-alternative\">\r\n\t\t\t\t\t\t{body.alternateBodyList?.map((altBody, index) => (\r\n\t\t\t\t\t\t\t<ZekrBodyText body={altBody} lineSeparator={false} key={index} settings={settings} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Conditional>\r\n\t\t\t</div>\r\n\t\t\t{lineSeparator && <hr className=\"zekr-line zekr-body-line \" />}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import './CategoryList.scss';\r\nimport React, { Fragment } from 'react';\r\nimport { FC } from 'react';\r\nimport { ZekrCategory } from '../../services/Zekr/models/ZekrCategory';\r\n\r\ninterface Props {\r\n\tcategory: ZekrCategory;\r\n}\r\n\r\nexport const CategoryListSmallIcon: FC<Props> = ({ category }) => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{category.iconClass ? (\r\n\t\t\t\t<i className={(category.iconClass || 'fa fa-search') + ' button-icon'} />\r\n\t\t\t) : category.imageUrl ? (\r\n\t\t\t\t<img className=\"icon-16 button-icon mx-1\" src={'/assets/icons/' + category.imageUrl} alt={category.title} />\r\n\t\t\t) : (\r\n\t\t\t\t<img className=\"icon-16 button-icon mx-1\" src=\"/assets/icons/star.svg\" alt={category.title} />\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","/**\r\n * Detects and add `position-sticky` class to the element.\r\n * IMPORTANT: top or bottom should be -1px\r\n * @param elementSelector\r\n * @returns\r\n */\r\nexport function detectPositionSticky(elementSelector: string) {\r\n\tconst stickyElm = document.querySelector(elementSelector);\r\n\tif (!stickyElm) return;\r\n\r\n\tconst observer = new IntersectionObserver(([e]) => e.target.classList.toggle('position-sticky', e.intersectionRatio < 1), {\r\n\t\tthreshold: [1],\r\n\t});\r\n\tobserver.observe(stickyElm);\r\n}\r\n","import './BookmarkZekrButton.scss';\r\nimport React, { FC, Fragment, MouseEventHandler, useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Zekr } from '../../services/Zekr/models/Zekr';\r\nimport { VersionNumber } from '../../components/VersionNumber';\r\nimport { AboutDialog } from '../AboutDialog/AboutDialog';\r\nimport { connect } from 'react-redux';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AppState } from '../../store/store';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { readSettingsActionCreator, saveSettingsActionCreator } from '../../store/Actions/SettingsActions';\r\nimport { AnyAction } from 'redux';\r\nimport { getZekrUrl } from '../../services/UrlService';\r\nimport { enableBootstrapToast } from '../../common/EnableBootstrapToast';\r\n\r\ninterface Props {\r\n\tzekr: Zekr;\r\n\tsettings?: AppSettings;\r\n\tsettingsLoading: boolean;\r\n\tsaveSettings: (settings: AppSettings) => void;\r\n}\r\n\r\n// variable is used because saveSettings is resetting the bookmark value\r\nvar bookmarked = false;\r\n\r\nconst BookmarkZekrButton: FC<Props> = ({ zekr, settingsLoading, settings, saveSettings }) => {\r\n\tuseEffect(() => {\r\n\t\t// reset Bookmarked value once!\r\n\t\tbookmarked = false;\r\n\t}, []);\r\n\r\n\tfunction displayToast(message: string) {\r\n\t\tvar bodyElm = document.querySelector<HTMLElement>('#bookmark-zekr-button-toast .toast-body');\r\n\t\tif (bodyElm) {\r\n\t\t\tbodyElm.innerText = message;\r\n\t\t}\r\n\r\n\t\tenableBootstrapToast('bookmark-zekr-button-toast');\r\n\t}\r\n\r\n\tfunction onBookmarkClick(e: any) {\r\n\t\te.preventDefault();\r\n\t\tif (!settings) return;\r\n\r\n\t\t//settings.bookmarks\r\n\t\tif (settings.userFavorites == null) {\r\n\t\t\tsettings.userFavorites = [];\r\n\t\t}\r\n\r\n\t\tvar existing = settings.userFavorites.find((f) => f.zekrUid == zekr.uid);\r\n\t\tif (existing) {\r\n\t\t\tdisplayToast('این صفحه قبلا در لیست علاقه مندی ها وجود دارد');\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tsettings.userFavorites.push({\r\n\t\t\t\tzekrUid: zekr.uid,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tbookmarked = true;\r\n\t\tsaveSettings(settings);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tdisplayToast('به لیست علاقه مندی ها اضافه شد');\r\n\t\t}, 400);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div\r\n\t\t\t\tid=\"bookmark-zekr-button-toast\"\r\n\t\t\t\tclassName=\"hide toast align-items-center text-white bg-success border-0 position-fixed bottom-0 start-50  translate-middle-x\"\r\n\t\t\t\trole=\"alert\"\r\n\t\t\t\taria-live=\"assertive\"\r\n\t\t\t\taria-atomic=\"true\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"d-flex\">\r\n\t\t\t\t\t<div className=\"toast-body\">به لیست علاقه مندی ها اضافه شد</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tclassName=\"btn-close btn-close-white me-2 m-auto\"\r\n\t\t\t\t\t\tdata-bs-dismiss=\"toast\"\r\n\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{settings && (\r\n\t\t\t\t<a href=\"#\" onClick={onBookmarkClick}>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc=\"/assets/icons/add-favourite.svg\"\r\n\t\t\t\t\t\tclassName={'icon-28 ' + (bookmarked ? 'animate-bookmark-button' : '')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (store: AppState) => {\r\n\treturn {\r\n\t\tsettings: store.settingsState.settings,\r\n\t\tsettingsLoading: store.settingsState.loading,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n\treturn {\r\n\t\treadSettings: () => dispatch(readSettingsActionCreator()),\r\n\t\tsaveSettings: (settings: AppSettings) => dispatch(saveSettingsActionCreator(settings)),\r\n\t};\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BookmarkZekrButton);\r\n","\r\nexport function enableBootstrapToast(id) {\r\n\tvar bootstrap = window[\"bootstrap\"];\r\n\r\n\tvar toastEl = document.getElementById(id);\r\n\tvar toast = new bootstrap.Toast(toastEl, {})\r\n\ttoast.show();\r\n\treturn toast;\r\n}\r\nexport function enableBootstrapToastAll() {\r\n\tvar bootstrap = window[\"bootstrap\"];\r\n\r\n\tvar toastElList = [].slice.call(document.querySelectorAll('.toast'))\r\n\tvar toastList = toastElList.map(function (toastEl) {\r\n\t\t// showing the toast\r\n\t\treturn new bootstrap.Toast(toastEl, {})\r\n\t})\r\n\treturn toastList;\r\n}","import './ZekrInlineCounter.scss';\r\n\r\nimport React, { FC, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Zekr } from '../../services/Zekr/models/Zekr';\r\nimport { ZekrCounter } from '../../services/Zekr/models/ZekrCounter';\r\n\r\ninterface Props {\r\n\tzekrCounts: ZekrCounter[];\r\n\tonCloseRequested?: () => void;\r\n}\r\nvar zekrClickStatus = false;\r\nvar zekrVibrateWarmed = false;\r\n\r\nexport const ZekrInlineCounter: FC<Props> = ({ zekrCounts, onCloseRequested }) => {\r\n\tconst [count, setCount] = useState<number>(0);\r\n\tconst [countHistory, setCountHistory] = useState<number[]>([]);\r\n\r\n\tfunction onCloseClick() {\r\n\t\tif (onCloseRequested) onCloseRequested();\r\n\t}\r\n\r\n\tfunction onTouchStart(e: any) {\r\n\t\tzekrClickStatus = true;\r\n\t\tincreaseCount();\r\n\t}\r\n\tfunction onMouseDown(e: any) {\r\n\t\tif (zekrClickStatus) return;\r\n\r\n\t\tzekrClickStatus = true;\r\n\t\tincreaseCount();\r\n\t}\r\n\tfunction onClick(e: any) {\r\n\t\tif (!zekrClickStatus) {\r\n\t\t\tincreaseCount();\r\n\t\t}\r\n\r\n\t\tzekrClickStatus = false;\r\n\t}\r\n\r\n\tfunction increaseCount() {\r\n\t\tsetCount(count + 1);\r\n\t\tvibrateShort();\r\n\t}\r\n\tfunction decreaseCount() {\r\n\t\tsetCount(count - 1);\r\n\t\tvibrateLong();\r\n\t}\r\n\r\n\tfunction resetCount() {\r\n\t\tif (count) countHistory.push(count);\r\n\t\tsetCount(0);\r\n\t\tvibrateLong();\r\n\t}\r\n\r\n\tfunction clearHistory() {\r\n\t\tsetCountHistory([]);\r\n\t\tvibrateLong();\r\n\t}\r\n\r\n\tfunction vibrateShort() {\r\n\t\tnavigator.vibrate(100);\r\n\t\tif ('vibrate' in navigator) {\r\n\t\t\tnavigator.vibrate(60);\r\n\t\t}\r\n\t}\r\n\tfunction vibrateLong() {\r\n\t\tif ('vibrate' in navigator) {\r\n\t\t\tnavigator.vibrate(200);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction vibrateWarmup() {\r\n\t\tif (zekrVibrateWarmed) return;\r\n\r\n\t\tif ('vibrate' in navigator) {\r\n\t\t\tnavigator.vibrate(1);\r\n\t\t}\r\n\t\tzekrVibrateWarmed = true;\r\n\t}\r\n\tvibrateWarmup();\r\n\r\n\treturn (\r\n\t\t<div className=\"zekr-counter-box zekr-counter-inline\">\r\n\t\t\t<div className=\"count mt-3\">شمارش: {count ? count : '0'}</div>\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclassName=\"counter-button button-contained\"\r\n\t\t\t\tonTouchStart={onTouchStart}\r\n\t\t\t\tonMouseDown={onMouseDown}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t>\r\n\t\t\t\tافزایش شمارنده\r\n\t\t\t</button>\r\n\t\t\t{onCloseRequested && <button onClick={onCloseClick} type=\"button\" className=\"btn-close text-reset\"></button>}\r\n\t\t\t<hr />\r\n\t\t\t<div>\r\n\t\t\t\t<button className=\"button-outlined\" onClick={decreaseCount}>\r\n\t\t\t\t\tکاهش\r\n\t\t\t\t</button>\r\n\t\t\t\t&nbsp;\r\n\t\t\t\t<button className=\"button-outlined\" onClick={resetCount}>\r\n\t\t\t\t\tاز ابتدا\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"history mb-2\">\r\n\t\t\t\t{countHistory?.length > 0 && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{countHistory?.map((c, i) => <div key={i}>شمارش: {c}</div>).reverse()}\r\n\t\t\t\t\t\t<button className=\"button-outlined mt-2\" onClick={clearHistory}>\r\n\t\t\t\t\t\t\tحذف تاریخچه\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { FC, Fragment, MouseEventHandler, useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Zekr } from '../../services/Zekr/models/Zekr';\r\nimport { VersionNumber } from '../../components/VersionNumber';\r\nimport { AboutDialog } from '../AboutDialog/AboutDialog';\r\nimport { connect } from 'react-redux';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AppState } from '../../store/store';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { readSettingsActionCreator, saveSettingsActionCreator } from '../../store/Actions/SettingsActions';\r\nimport { AnyAction } from 'redux';\r\nimport { getZekrUrl } from '../../services/UrlService';\r\nimport { enableBootstrapToast } from '../../common/EnableBootstrapToast';\r\n\r\ninterface Props {\r\n\tsettings?: AppSettings;\r\n\tsettingsLoading: boolean;\r\n\tsaveSettings: (settings: AppSettings) => void;\r\n}\r\n\r\nconst TextZoomButtons: FC<Props> = ({ settingsLoading, settings, saveSettings }) => {\r\n\tfunction saveChanges() {\r\n\t\tif (settings) saveSettings(settings);\r\n\t}\r\n\tconst fontUnit = 'rem';\r\n\r\n\tfunction onAddClick(e: any) {\r\n\t\te.preventDefault();\r\n\t\tif (!settings) return;\r\n\r\n\t\tvar fontSize = parseFloat(settings.textSettings.bodyFontSize);\r\n\t\tvar alternateFontSize = parseFloat(settings.textSettings.alternateBodyFontSize);\r\n\r\n\t\tfontSize += 0.1;\r\n\t\talternateFontSize += 0.1;\r\n\t\tif (fontSize > 3.3 || alternateFontSize > 3.3) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsettings.textSettings.bodyFontSize = fontSize + fontUnit;\r\n\t\tsettings.textSettings.alternateBodyFontSize = alternateFontSize + fontUnit;\r\n\t\tsaveChanges();\r\n\t}\r\n\r\n\tfunction onRemoveClick(e: any) {\r\n\t\te.preventDefault();\r\n\t\tif (!settings) return;\r\n\r\n\t\tvar fontSize = parseFloat(settings.textSettings.bodyFontSize);\r\n\t\tvar alternateFontSize = parseFloat(settings.textSettings.alternateBodyFontSize);\r\n\r\n\t\tfontSize -= 0.1;\r\n\t\talternateFontSize -= 0.1;\r\n\t\tif (fontSize < 0.5 || alternateFontSize < 0.5) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsettings.textSettings.bodyFontSize = fontSize + fontUnit;\r\n\t\tsettings.textSettings.alternateBodyFontSize = alternateFontSize + fontUnit;\r\n\t\tsaveChanges();\r\n\t}\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<a href=\"#\" onClick={onAddClick}>\r\n\t\t\t\t<img src=\"/assets/icons/add.svg\" alt=\"+\" className=\"icon-24  link-image\" />\r\n\t\t\t\t{/* <i className=\"fas fa-minus-circle fa-lg\"></i> */}\r\n\t\t\t</a>\r\n\t\t\t<a href=\"#\" onClick={onRemoveClick}>\r\n\t\t\t\t<img src=\"/assets/icons/remove.svg\" alt=\"-\" className=\"icon-24 link-image\" />\r\n\t\t\t\t{/* <i className=\"fas fa-plus-circle fa-lg\"></i> */}\r\n\t\t\t</a>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (store: AppState) => {\r\n\treturn {\r\n\t\tsettings: store.settingsState.settings,\r\n\t\tsettingsLoading: store.settingsState.loading,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n\treturn {\r\n\t\treadSettings: () => dispatch(readSettingsActionCreator()),\r\n\t\tsaveSettings: (settings: AppSettings) => dispatch(saveSettingsActionCreator(settings)),\r\n\t};\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TextZoomButtons);\r\n","import './ZekrPage.scss';\r\nimport React, { FC, Fragment, useEffect, useState } from 'react';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { ErrorMessage, retryType } from '../../components/ErrorMessage/ErrorMessage';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { Zekr } from '../../services/Zekr/models/Zekr';\r\nimport { getZekrByUid, getZekrCategoryChainToTopByUid } from '../../services/Zekr/ZekrService';\r\nimport { ZekrBodyText } from '../../components/ZekrBodyText/ZekrBodyText';\r\nimport { ZekrCategory } from '../../services/Zekr/models/ZekrCategory';\r\nimport { AppState } from '../../store/store';\r\nimport { connect } from 'react-redux';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AnyAction } from 'redux';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { readSettingsActionCreator } from '../../store/Actions/SettingsActions';\r\nimport { CategoryListSmallIcon } from '../../containers/CategoryList/CategoryListSmallIcon';\r\nimport { BackButton } from '../../components/BackButton/BackButton';\r\nimport { detectPositionSticky } from '../../common/helpers/positionSticky';\r\nimport BookmarkZekrButton from '../../containers/BookmarkZekrButton/BookmarkZekrButton';\r\nimport { PageMeta } from '../../containers/PageMeta/PageMeta';\r\nimport { ZekrInlineCounter } from '../../containers/ZekrInlineCounter/ZekrInlineCounter';\r\nimport TextZoomButtons from '../../containers/TextZoomButtons/TextZoomButtons';\r\n\r\ninterface params {\r\n\tzekrUid: string;\r\n}\r\ninterface Props extends RouteComponentProps<params> {\r\n\tsettings: AppSettings | undefined;\r\n\tsettingsLoading: boolean;\r\n\treadSettings: () => void;\r\n}\r\n\r\nconst ZekrPage: FC<Props> = ({ history, match, settings, settingsLoading, readSettings }) => {\r\n\tconst [zekr, setZekr] = useState<Zekr>();\r\n\tconst [loading, setLoading] = useState<boolean>(true);\r\n\tconst [categories, setCategories] = useState<ZekrCategory[] | undefined>();\r\n\tconst [benefitsOpen, setBenefitsOpen] = useState<boolean>(false);\r\n\tconst [zekrCounterVisible, setZekrCounterVisible] = useState(false);\r\n\r\n\tvar zekrUid = match.params.zekrUid;\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function doGetZekr() {\r\n\t\t\tsetLoading(true);\r\n\r\n\t\t\tvar loadedZkr = await getZekrByUid(zekrUid).catch((err) => {\r\n\t\t\t\tconsole.warn('Failed to read zekr: ' + zekrUid, err);\r\n\t\t\t});\r\n\r\n\t\t\tif (loadedZkr) {\r\n\t\t\t\tlet loadedCategoryChain = await getZekrCategoryChainToTopByUid(loadedZkr.category).catch((err) => {\r\n\t\t\t\t\tconsole.warn('Failed to read ZekrCategory for zekr: ' + zekrUid, err);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (loadedCategoryChain) {\r\n\t\t\t\t\tsetCategories(loadedCategoryChain);\r\n\t\t\t\t\tsetZekr(loadedZkr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t\tif (settings === null) {\r\n\t\t\treadSettings();\r\n\t\t}\r\n\t\tdoGetZekr();\r\n\r\n\t\tdetectPositionSticky('.sticky-inline-header');\r\n\t\tdetectPositionSticky('.zekr-body-play-voice');\r\n\t}, [zekrUid, settings, readSettings]);\r\n\r\n\tfunction onReturnClick() {\r\n\t\tif (history.length > 2) {\r\n\t\t\thistory.goBack();\r\n\t\t} else if (categories && categories.length > 0) {\r\n\t\t}\r\n\t}\r\n\r\n\tfunction openZekrBenefits() {\r\n\t\tsetBenefitsOpen(true);\r\n\t}\r\n\tfunction closeZekrBenefits() {\r\n\t\tsetBenefitsOpen(false);\r\n\t}\r\n\tfunction onShowZekrCounter(e: any) {\r\n\t\te.preventDefault();\r\n\t\tsetZekrCounterVisible(true);\r\n\t}\r\n\tfunction onCloseZekrCounter() {\r\n\t\tsetZekrCounterVisible(false);\r\n\t}\r\n\r\n\tlet benefitsCss = {};\r\n\r\n\tif (settings) {\r\n\t\tbenefitsCss = {\r\n\t\t\tfontSize: settings.textSettings.benefitsFontSize,\r\n\t\t};\r\n\t}\r\n\r\n\tconst zekrBenefitsDialog = () => (\r\n\t\t<div\r\n\t\t\tclassName=\"modal fade hide zekr-benefits-container\"\r\n\t\t\tid=\"zekr-benefits-dialog\"\r\n\t\t\ttabIndex={-1}\r\n\t\t\taria-labelledby=\"zekr-benefits-dialog-title\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<div className=\"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<div className=\"modal-title fw-bold\" id=\"zekr-benefits-dialog-title\">\r\n\t\t\t\t\t\t\t{'فضیلت ' + zekr?.fullName}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t<div className=\"zekr-body-container\">\r\n\t\t\t\t\t\t\t{zekr?.benefits?.map((body, index) => (\r\n\t\t\t\t\t\t\t\t<ZekrBodyText settings={settings} key={index} body={body} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn loading || settingsLoading || !zekr ? (\r\n\t\tloading || settingsLoading ? (\r\n\t\t\t<Loading />\r\n\t\t) : (\r\n\t\t\t<ErrorMessage retry={retryType.reloadPage} />\r\n\t\t)\r\n\t) : (\r\n\t\t<div className=\"zekr-container\">\r\n\t\t\t<PageMeta\r\n\t\t\t\ttitle={(zekr?.fullName ?? zekr.shortName) + ' - مشاهده ذکر'}\r\n\t\t\t\tdescription={'مشاهده ذکر و دعا - ' + zekr?.fullName}\r\n\t\t\t/>\r\n\t\t\t<div className=\"sticky-inline-header\">\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"page-inline-header\">\r\n\t\t\t\t\t\t<div className=\"inline-breadcrumbs hidden-xs\">\r\n\t\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{categories?.map((parent) => (\r\n\t\t\t\t\t\t\t\t\t<span key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-separator\">\\</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={'/zekr-list/' + parent.uid} key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* {category.icon && <i className={'fa ' + category.icon}></i>} zekr-benefits-dialog*/}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CategoryListSmallIcon category={parent} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{parent.title}\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h1 className=\"inline-title\">{zekr.fullName}</h1>\r\n\t\t\t\t\t\t<div className=\"inline-actions\">\r\n\t\t\t\t\t\t\t{zekr.benefits && zekr.benefits?.length > 0 && (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={openZekrBenefits}\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\ttitle=\"فضیلت\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"button mx-2\"\r\n\t\t\t\t\t\t\t\t\tdata-bs-toggle=\"modal\"\r\n\t\t\t\t\t\t\t\t\tdata-bs-target=\"#zekr-benefits-dialog\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/islam-star.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t\t<span className=\"hidden-xs-inline\">&nbsp; فضیلت</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<BackButton />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"out-breadcrumbs visible-xs\">\r\n\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t{categories?.map((parent) => (\r\n\t\t\t\t\t\t\t\t<span key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-separator\">\\</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t\t<Link to={'/zekr-list/' + parent.uid} key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* {category.icon && <i className={'fa ' + category.icon}></i>} */}\r\n\t\t\t\t\t\t\t\t\t\t\t<CategoryListSmallIcon category={parent} />\r\n\t\t\t\t\t\t\t\t\t\t\t{parent.title}\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-4\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"zekr-body-container\">\r\n\t\t\t\t{zekr.zekrBody.map((body, index) => (\r\n\t\t\t\t\t<ZekrBodyText settings={settings} key={index} body={body} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t{zekr.source &&\r\n\t\t\t\tzekr.source.length > 0 &&\r\n\t\t\t\tzekr.source.map((src, index) => (\r\n\t\t\t\t\t<div className=\"zekr-source\" key={index}>\r\n\t\t\t\t\t\tمنبع:&nbsp;\r\n\t\t\t\t\t\t<a href={src.url} target=\"_blank\" rel=\"noopener noreferrer nofollow\">\r\n\t\t\t\t\t\t\t{src.title}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t<div className=\"zekr-body-play-voice\">\r\n\t\t\t\t{/* <a href=\"#\">\r\n\t\t\t\t\t<img src=\"/assets/icons/stop.svg\" className=\"icon-24  link-image\" />\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t<img src=\"/assets/icons/play-button.svg\" className=\"icon-28 link-image\" />\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t<img src=\"/assets/icons/microphone.svg\" className=\"icon-20 link-image\" />\r\n\t\t\t\t</a> */}\r\n\t\t\t\t<TextZoomButtons />\r\n\t\t\t\t<BookmarkZekrButton zekr={zekr} />\r\n\t\t\t\t{zekr.zekrCounter && zekr.zekrCounter.length > 0 && (\r\n\t\t\t\t\t<a href=\"#\" onClick={onShowZekrCounter} title=\"ذکر شمار\">\r\n\t\t\t\t\t\t<img src=\"/assets/icons/tasbih.svg\" alt=\".\" className=\"icon-24 link-image\" />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{zekr.benefits && zekr.benefits.length > 0 && zekrBenefitsDialog()}\r\n\t\t\t{zekrCounterVisible && zekr.zekrCounter && zekr.zekrCounter.length > 0 && (\r\n\t\t\t\t<ZekrInlineCounter zekrCounts={zekr.zekrCounter} onCloseRequested={onCloseZekrCounter} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (store: AppState) => {\r\n\treturn {\r\n\t\tsettings: store.settingsState.settings,\r\n\t\tsettingsLoading: store.settingsState.loading,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n\treturn {\r\n\t\treadSettings: () => dispatch(readSettingsActionCreator()),\r\n\t};\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ZekrPage);\r\n","import React, { FC } from 'react';\r\nimport { PageMeta } from '../../containers/PageMeta/PageMeta';\r\n\r\nexport const NotFoundPage: FC = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PageMeta title=\"یافت نشد\" description=\"عنوان مورد نظر شما یافت نشد\" />\r\n\t\t\t<p>404 Not Found!</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { IconButton, InputAdornment, TextField } from '@material-ui/core';\r\nimport React, { FC, FormEvent, useState } from 'react';\r\nimport { ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport { searchZekrIndex } from '../../services/Zekr/ZekrSearch';\r\nimport { ZekrList } from '../ZekrList/ZekrList';\r\n\r\ninterface Props {\r\n\ttextBoxId: string;\r\n\tzekrList: ZekrIndex[];\r\n\tsectionTitle: string;\r\n\tdisplaySearchInputLimit?: number;\r\n\tdisplayRemoveButton?: boolean;\r\n\tonRemoveClick?: (zekr: ZekrIndex) => void;\r\n}\r\n\r\nexport const ZekrListSearchable: FC<Props> = ({\r\n\ttextBoxId,\r\n\tzekrList,\r\n\tsectionTitle,\r\n\tdisplaySearchInputLimit,\r\n\tdisplayRemoveButton,\r\n\tonRemoveClick,\r\n}) => {\r\n\tconst [searchText, setSearchText] = useState<string>('');\r\n\tconst [zekrSearchResult, setZekrSearchResult] = useState<ZekrIndex[] | null>();\r\n\r\n\tif (!displaySearchInputLimit) {\r\n\t\t// default limit to show search box\r\n\t\tdisplaySearchInputLimit = 5;\r\n\t}\r\n\r\n\tvar searchTimeout: NodeJS.Timeout;\r\n\tfunction onSearchInput(event: FormEvent<HTMLInputElement>) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif (searchTimeout) {\r\n\t\t\tclearTimeout(searchTimeout);\r\n\t\t}\r\n\t\tsearchTimeout = setTimeout(doSearch, 250);\r\n\t}\r\n\tfunction onSearchChange() {\r\n\t\tdoSearch();\r\n\t}\r\n\r\n\tfunction onSearchInputKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tif (event.key == 'Enter') {\r\n\t\t\tdoSearch();\r\n\t\t\tdocument.getElementById(textBoxId)?.blur();\r\n\r\n\t\t\tvar items = document.getElementsByClassName('item-button');\r\n\t\t\tif (items.length) {\r\n\t\t\t\t(items[0] as HTMLInputElement).focus();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction onSearchIconClick() {\r\n\t\tdoSearch();\r\n\t}\r\n\tfunction doSearch() {\r\n\t\tvar val = (document.getElementById(textBoxId) as HTMLInputElement).value;\r\n\t\tif (!val) {\r\n\t\t\tsetSearchText(val);\r\n\t\t\tsetZekrSearchResult(null);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar searchResult = searchZekrIndex(zekrList, val, zekrList.length);\r\n\t\tsetZekrSearchResult(searchResult);\r\n\t\tsetSearchText(val);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"main-section\">\r\n\t\t\t<h3 className=\"main-section-title title-with-tools\">\r\n\t\t\t\t<span className=\"no-wrap\">{sectionTitle}</span>\r\n\t\t\t\t{zekrList.length > displaySearchInputLimit && (\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tclassName=\"search-input\"\r\n\t\t\t\t\t\tid={textBoxId}\r\n\t\t\t\t\t\tplaceholder=\"جستجو در این اذکار\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonInput={onSearchInput}\r\n\t\t\t\t\t\tonChange={onSearchChange}\r\n\t\t\t\t\t\tonKeyDown={onSearchInputKeyDown}\r\n\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t\t<IconButton onClick={onSearchIconClick}>\r\n\t\t\t\t\t\t\t\t\t\t<span role=\"img\">🔍</span>\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</h3>\r\n\t\t\t<div className=\"\">\r\n\t\t\t\t{searchText && !zekrSearchResult?.length && (\r\n\t\t\t\t\t<div className=\"\">متاسفانه نتیجه ای یافت نشد. با کلمات کوتاه تر امتحان کنید.</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{!searchText && !zekrList.length && <div>هیچ ذکری یافت نشد</div>}\r\n\t\t\t\t{(zekrSearchResult?.length || zekrList.length > 0) && (\r\n\t\t\t\t\t<ZekrList\r\n\t\t\t\t\t\tdata={zekrSearchResult || zekrList}\r\n\t\t\t\t\t\tdisplayRemoveButton={displayRemoveButton}\r\n\t\t\t\t\t\tonRemoveClick={onRemoveClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t);\r\n};\r\n","import './ZekrCategoryPage.scss';\r\nimport React, { FC, useEffect, useState } from 'react';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { ErrorMessage, retryType } from '../../components/ErrorMessage/ErrorMessage';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport { ZekrCategory } from '../../services/Zekr/models/ZekrCategory';\r\nimport { getZekrByCategoryUid, getZekrCategoryByUid, getZekrCategoryChildrenByParentUid } from '../../services/Zekr/ZekrService';\r\nimport { CategoryList } from '../../containers/CategoryList/CategoryList';\r\nimport { BackButton } from '../../components/BackButton/BackButton';\r\nimport { CategoryListSmallIcon } from '../../containers/CategoryList/CategoryListSmallIcon';\r\nimport { ZekrListSearchable } from '../../containers/ZekrListSearchable/ZekrListSearchable';\r\nimport { PageMeta } from '../../containers/PageMeta/PageMeta';\r\n\r\ninterface params {\r\n\tcategoryUid: string;\r\n}\r\nexport const ZekrCategoryPage: FC<RouteComponentProps<params>> = ({ match, history }) => {\r\n\tconst [zekrList, setZekrList] = useState<ZekrIndex[]>();\r\n\tconst [loading, setLoading] = useState<boolean>(true);\r\n\tconst [childrenCategories, setChildrenCategories] = useState<ZekrCategory[]>();\r\n\tconst [category, setCategory] = useState<ZekrCategory>();\r\n\tconst [catParents, setCatParents] = useState<ZekrCategory[]>([]);\r\n\r\n\tvar categoryUid = match.params.categoryUid;\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function doGetZekrList() {\r\n\t\t\tsetLoading(true);\r\n\t\t\tlet categoriesPromise = getZekrCategoryChildrenByParentUid(categoryUid).catch((err) => {\r\n\t\t\t\tconsole.warn('Failed to read parent categories for: ' + categoryUid, err);\r\n\t\t\t});\r\n\t\t\tlet categoryPromise = getZekrCategoryByUid(categoryUid).catch((err) => {\r\n\t\t\t\tconsole.warn('Failed to read Category: ' + categoryUid, err);\r\n\t\t\t});\r\n\r\n\t\t\tlet loadedZekrList = await getZekrByCategoryUid(categoryUid).catch((err) => {\r\n\t\t\t\tconsole.warn('Failed to read Zekr list for category:' + categoryUid, err);\r\n\t\t\t});\r\n\t\t\tlet categories = await categoriesPromise;\r\n\t\t\tlet category = await categoryPromise;\r\n\r\n\t\t\tlet parents: ZekrCategory[] = [];\r\n\r\n\t\t\tif (category && category.parent?.length) {\r\n\t\t\t\tfor (const parentUid of category.parent) {\r\n\t\t\t\t\tlet parent = await getZekrCategoryByUid(parentUid).catch(() => {});\r\n\t\t\t\t\tif (parent) {\r\n\t\t\t\t\t\tparents.push(parent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetCatParents(parents);\r\n\t\t\t} else {\r\n\t\t\t\tsetCatParents([]);\r\n\t\t\t}\r\n\r\n\t\t\tif (loadedZekrList) setZekrList(loadedZekrList);\r\n\t\t\tif (categories) setChildrenCategories(categories);\r\n\t\t\tif (category) setCategory(category);\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t\tdoGetZekrList();\r\n\t}, [categoryUid]);\r\n\r\n\tfunction categoryClick() {\r\n\t\thistory.push('/zekr-list/' + category?.uid);\r\n\t}\r\n\r\n\treturn loading || !zekrList ? (\r\n\t\tloading ? (\r\n\t\t\t<Loading />\r\n\t\t) : (\r\n\t\t\t<ErrorMessage retry={retryType.reloadPage} />\r\n\t\t)\r\n\t) : (\r\n\t\t<div>\r\n\t\t\t<PageMeta title={category?.title + ' - مشاهده دسته'} description={'مشاهده دسته - ' + category?.title} />\r\n\t\t\t<div className=\"sticky-inline-header\">\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"page-inline-header\">\r\n\t\t\t\t\t\t<div className=\"inline-breadcrumbs hidden-xs\">\r\n\t\t\t\t\t\t\t{/* ---------- */}\r\n\t\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{catParents?.map((parent) => (\r\n\t\t\t\t\t\t\t\t\t<span key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-separator\">\\</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={'/zekr-list/' + parent.uid} key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* {category.icon && <i className={'fa ' + category.icon}></i>} */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CategoryListSmallIcon category={parent} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{parent.title}\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h1 className=\"inline-title\">\r\n\t\t\t\t\t\t\t{category && (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t{/* {category.icon && <i className={'fa ' + category.icon}></i>} */}\r\n\t\t\t\t\t\t\t\t\t<Link to={'/zekr-list/' + category.uid} key={category.uid}>\r\n\t\t\t\t\t\t\t\t\t\tمشاهده دسته: {category.title}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t<div className=\"inline-actions\">\r\n\t\t\t\t\t\t\t<BackButton />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"out-breadcrumbs visible-xs\">\r\n\t\t\t\t\t\t{/* ---------- */}\r\n\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t{catParents?.map((parent) => (\r\n\t\t\t\t\t\t\t\t<span key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-separator\">\\</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t\t<Link to={'/zekr-list/' + parent.uid} key={parent.uid}>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* {category.icon && <i className={'fa ' + category.icon}></i>} */}\r\n\t\t\t\t\t\t\t\t\t\t\t<CategoryListSmallIcon category={parent} />\r\n\t\t\t\t\t\t\t\t\t\t\t{parent.title}\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-4\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{childrenCategories && (\r\n\t\t\t\t<section className=\"main-section\">\r\n\t\t\t\t\t<h3 className=\"main-section-title\">\r\n\t\t\t\t\t\t<span>⭐</span>\r\n\t\t\t\t\t\tزیر مجموعه ها\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t\t<CategoryList data={childrenCategories} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t)}\r\n\t\t\t<ZekrListSearchable textBoxId=\"category-page-zekr\" sectionTitle=\"⭐ دعاها\" zekrList={zekrList} />\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { Action, ActionCreator, Dispatch, Reducer } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { getAppSettingsInitial } from '../../services/Settings/models/AppSettings';\r\nimport {\r\n\tAction_ReadingSettings,\r\n\tAction_ReadSettings,\r\n\tAction_SaveSettings,\r\n\tAction_SavingSettings,\r\n\tSettingsActions,\r\n} from '../Actions/SettingsActions';\r\nimport { SettingsState } from '../store';\r\n\r\nconst initialSettingsState: SettingsState = {\r\n\tloading: false,\r\n\tsettings: undefined,\r\n\tuserInformation: undefined,\r\n};\r\n\r\nconst neverReached = (never: never) => {};\r\n\r\nexport const settingsReducer: Reducer<SettingsState, SettingsActions> = (state = initialSettingsState, action): any => {\r\n\tswitch (action.type) {\r\n\t\tcase Action_ReadingSettings: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsettings: null,\r\n\t\t\t\tuserInformation: null,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase Action_ReadSettings: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsettings: action.settings,\r\n\t\t\t\tuserInformation: action.userInformation,\r\n\t\t\t\tloading: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase Action_SavingSettings: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase Action_SaveSettings: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\tneverReached(action);\r\n\t}\r\n\treturn state;\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { AppState } from '../store';\r\nimport { settingsReducer } from './SettingsReducer';\r\n\r\nexport const rootReducer = combineReducers<AppState>({\r\n\tsettingsState: settingsReducer,\r\n});\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { BackButton } from '../../components/BackButton/BackButton';\r\nimport { PageMeta } from '../../containers/PageMeta/PageMeta';\r\nimport './ZekrCounter.scss';\r\n\r\nvar zekrClickStatus = false;\r\nvar zekrVibrateWarmed = false;\r\n\r\nexport const ZekrCounter = () => {\r\n\tconst [count, setCount] = useState<number>(0);\r\n\tconst [countHistory, setCountHistory] = useState<number[]>([]);\r\n\r\n\tfunction onTouchStart(e: any) {\r\n\t\tzekrClickStatus = true;\r\n\t\tincreaseCount();\r\n\t}\r\n\tfunction onMouseDown(e: any) {\r\n\t\tif (zekrClickStatus) return;\r\n\r\n\t\tzekrClickStatus = true;\r\n\t\tincreaseCount();\r\n\t}\r\n\tfunction onClick(e: any) {\r\n\t\tif (!zekrClickStatus) {\r\n\t\t\tincreaseCount();\r\n\t\t}\r\n\r\n\t\tzekrClickStatus = false;\r\n\t}\r\n\r\n\tfunction increaseCount() {\r\n\t\tsetCount(count + 1);\r\n\t\tvibrateShort();\r\n\t}\r\n\tfunction decreaseCount() {\r\n\t\tsetCount(count - 1);\r\n\t\tvibrateLong();\r\n\t}\r\n\r\n\tfunction resetCount() {\r\n\t\tif (count) countHistory.push(count);\r\n\t\tsetCount(0);\r\n\t\tvibrateLong();\r\n\t}\r\n\r\n\tfunction clearHistory() {\r\n\t\tsetCountHistory([]);\r\n\t\tvibrateLong();\r\n\t}\r\n\r\n\tfunction vibrateShort() {\r\n\t\tnavigator.vibrate(100);\r\n\t\tif ('vibrate' in navigator) {\r\n\t\t\tnavigator.vibrate(60);\r\n\t\t}\r\n\t}\r\n\tfunction vibrateLong() {\r\n\t\tif ('vibrate' in navigator) {\r\n\t\t\tnavigator.vibrate(200);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction vibrateWarmup() {\r\n\t\tif (zekrVibrateWarmed) return;\r\n\r\n\t\tif ('vibrate' in navigator) {\r\n\t\t\tnavigator.vibrate(1);\r\n\t\t}\r\n\t\tzekrVibrateWarmed = true;\r\n\t}\r\n\tvibrateWarmup();\r\n\r\n\treturn (\r\n\t\t<div className=\"zekr-counter-box\">\r\n\t\t\t<PageMeta title=\"ذکر شمار\" description=\"ذکر شمار\" />\r\n\t\t\t<div className=\"sticky-inline-header-DISABLED\">\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"page-inline-header\">\r\n\t\t\t\t\t\t<div className=\"inline-breadcrumbs hidden-xs\">\r\n\t\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h1 className=\"inline-title\">ذکر شمار</h1>\r\n\t\t\t\t\t\t<div className=\"inline-actions\">\r\n\t\t\t\t\t\t\t<BackButton />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"count mt-3\">شمارش: {count ? count : '0'}</div>\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclassName=\"counter-button button-contained\"\r\n\t\t\t\tonTouchStart={onTouchStart}\r\n\t\t\t\tonMouseDown={onMouseDown}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t>\r\n\t\t\t\tافزایش شمارنده\r\n\t\t\t</button>\r\n\t\t\t<hr />\r\n\t\t\t<div>\r\n\t\t\t\t<button className=\"button-outlined\" onClick={decreaseCount}>\r\n\t\t\t\t\tکاهش\r\n\t\t\t\t</button>\r\n\t\t\t\t&nbsp;\r\n\t\t\t\t<button className=\"button-outlined\" onClick={resetCount}>\r\n\t\t\t\t\tاز ابتدا\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"history mb-2\">\r\n\t\t\t\t{countHistory?.length > 0 && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{countHistory?.map((c, i) => <div key={i}>شمارش: {c}</div>).reverse()}\r\n\t\t\t\t\t\t<button className=\"button-outlined mt-2\" onClick={clearHistory}>\r\n\t\t\t\t\t\t\tحذف تاریخچه\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { AnyAction } from 'redux';\r\nimport React, { FC, useEffect, useState } from 'react';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AppSettings } from '../../services/Settings/models/AppSettings';\r\nimport { readSettingsActionCreator, saveSettingsActionCreator } from '../../store/Actions/SettingsActions';\r\nimport { AppState } from '../../store/store';\r\nimport './FavoritesPage.scss';\r\nimport { connect } from 'react-redux';\r\nimport { ZekrListSearchable } from '../../containers/ZekrListSearchable/ZekrListSearchable';\r\nimport { BackButton } from '../../components/BackButton/BackButton';\r\nimport { Loading } from '../../components/Loading/Loading';\r\nimport { ErrorMessage, retryType } from '../../components/ErrorMessage/ErrorMessage';\r\nimport { getZekrIndexList } from '../../services/Zekr/ZekrWebService';\r\nimport { ZekrIndex } from '../../services/Zekr/models/Zekr';\r\nimport { PageMeta } from '../../containers/PageMeta/PageMeta';\r\n\r\ninterface Props extends RouteComponentProps {\r\n\tsettings: AppSettings | undefined;\r\n\tsettingsLoading: boolean;\r\n\treadSettings: () => void;\r\n\tsaveSettings: (settings: AppSettings) => void;\r\n}\r\n\r\nconst FavoritesPage: FC<Props> = ({ settings, settingsLoading, readSettings, saveSettings }) => {\r\n\tfunction saveChanges() {\r\n\t\tif (settings) saveSettings(settings);\r\n\t}\r\n\r\n\tconst [loading, setLoading] = useState<boolean>(true);\r\n\tconst [zekrIndexList, setZekrIndexList] = useState<ZekrIndex[]>([]);\r\n\tconst [zekrFavorites, setZekrFavorites] = useState<ZekrIndex[]>([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function doGetZekrList() {\r\n\t\t\tsetLoading(true);\r\n\t\t\tlet loadedZekrIndexList = await getZekrIndexList();\r\n\r\n\t\t\tif (loadedZekrIndexList) {\r\n\t\t\t\tsetZekrIndexList(loadedZekrIndexList);\r\n\t\t\t}\r\n\r\n\t\t\tsetLoading(false);\r\n\r\n\t\t\treloadZekrFavorites();\r\n\t\t}\r\n\t\tdoGetZekrList();\r\n\t}, []);\r\n\r\n\tfunction onRemoveClick(zekr: ZekrIndex) {\r\n\t\tif (!zekr) return;\r\n\r\n\t\tif (!settings || !zekrIndexList || !zekrIndexList.length) return;\r\n\r\n\t\t// if already removed\r\n\t\tif (!zekrFavorites.length) return;\r\n\t\tvar userFavList = settings.userFavorites;\r\n\r\n\t\tvar zekrIndex = userFavList.findIndex((z) => z.zekrUid == zekr.uid);\r\n\t\tif (zekrIndex >= 0) {\r\n\t\t\tvar confirmed = window.confirm('آیا واقعا مایل به حذف هستید؟');\r\n\t\t\tif (!confirmed) return;\r\n\r\n\t\t\tuserFavList.splice(zekrIndex, 1);\r\n\r\n\t\t\tsaveChanges();\r\n\t\t\treloadZekrFavorites(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reloadZekrFavorites(forceReload = false) {\r\n\t\tif (loading || settingsLoading) return;\r\n\t\tif (!settings || !zekrIndexList || !zekrIndexList.length) return;\r\n\r\n\t\t// if already extracted\r\n\t\tif (zekrFavorites.length && !forceReload) return;\r\n\r\n\t\tif (settings.userFavorites) {\r\n\t\t\tvar foundZekr: ZekrIndex[] = [];\r\n\r\n\t\t\tfor (const fav of settings.userFavorites) {\r\n\t\t\t\tvar zekr = zekrIndexList.find((z) => z.uid == fav.zekrUid);\r\n\t\t\t\tif (zekr) {\r\n\t\t\t\t\tfoundZekr.push(zekr);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO: remove the bookmark as it is invalid!\r\n\t\t\t\t\tconsole.warn('Favourite not found!', fav.zekrUid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (foundZekr.length || forceReload) {\r\n\t\t\t\tsetZekrFavorites(foundZekr);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// run at every render\r\n\treloadZekrFavorites();\r\n\r\n\treturn settingsLoading || !settings ? (\r\n\t\tsettingsLoading ? (\r\n\t\t\t<Loading />\r\n\t\t) : (\r\n\t\t\t<ErrorMessage retry={retryType.reloadPage} />\r\n\t\t)\r\n\t) : (\r\n\t\t<div>\r\n\t\t\t<PageMeta title=\"لیست علاقه مندی ها\" description=\"مشاهده و مدیریت لیست علاقه مندی های شما\" />\r\n\t\t\t<div className=\"sticky-inline-header\">\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"page-inline-header\">\r\n\t\t\t\t\t\t<div className=\"inline-breadcrumbs hidden-xs\">\r\n\t\t\t\t\t\t\t{/* ---------- */}\r\n\t\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"inline-title\">\r\n\t\t\t\t\t\t\t<i className=\"fas fa-heart text-danger\"></i> لیست علاقه مندی ها\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"inline-actions\">\r\n\t\t\t\t\t\t\t<BackButton />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"block-cell\">\r\n\t\t\t\t\t<div className=\"out-breadcrumbs visible-xs\">\r\n\t\t\t\t\t\t<span className=\"breadcrumbs-list\">\r\n\t\t\t\t\t\t\t<span className=\"breadcrumb-item\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t\t<img src=\"/assets/icons/home.svg\" className=\"icon-20\" />\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-4\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<ZekrListSearchable\r\n\t\t\t\ttextBoxId=\"favorites-page-zekr\"\r\n\t\t\t\tsectionTitle=\"لیست علاقه مندی ها\"\r\n\t\t\t\tzekrList={zekrFavorites}\r\n\t\t\t\tdisplayRemoveButton={true}\r\n\t\t\t\tonRemoveClick={onRemoveClick}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\nconst mapStateToProps = (store: AppState) => {\r\n\treturn {\r\n\t\tsettings: store.settingsState.settings,\r\n\t\tsettingsLoading: store.settingsState.loading,\r\n\t};\r\n};\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n\treturn {\r\n\t\treadSettings: () => dispatch(readSettingsActionCreator()),\r\n\t\tsaveSettings: (settings: AppSettings) => dispatch(saveSettingsActionCreator(settings)),\r\n\t};\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FavoritesPage);\r\n","import React, { useEffect } from 'react';\r\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\r\nimport './App.scss';\r\nimport Layout from './containers/Layout/Layout';\r\nimport { HomePage } from './pages/HomePage/HomePage';\r\nimport ZekrPage from './pages/ZekrPage/ZekrPage';\r\nimport { NotFoundPage } from './pages/NotFoundPage/NotFoundPage';\r\nimport { ZekrCategoryPage } from './pages/ZekrCategoryPage/ZekrCategoryPage';\r\nimport { configureStore } from './store/store';\r\nimport { Provider } from 'react-redux';\r\nimport { ZekrCounter } from './pages/ZekrCounter/ZekrCounter';\r\nimport FavoritesPage from './pages/FavoritesPage/FavoritesPage';\r\nimport { redirectToMyZekrCom } from './common/myZekrDomainRedirect';\r\n\r\nfunction App() {\r\n\tconst store = configureStore();\r\n\r\n\tuseEffect(() => {\r\n\t\t//const history = createBrowserHistory();\r\n\t\t// // Initialize google analytics page view tracking\r\n\t\t// history.listen(location => {\r\n\t\t// ReactGA.set({ page: location.pathname }); // Update the user's current page\r\n\t\t// ReactGA.pageview(location.pathname); // Record a pageview for the given page\r\n\t\t// });\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Provider store={store}>\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Redirect path=\"/home\" to=\"/\" />\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={HomePage} />\r\n\t\t\t\t\t\t<Route path=\"/zekr/:zekrUid\" component={ZekrPage} />\r\n\t\t\t\t\t\t<Route path=\"/zekr-list/:categoryUid\" component={ZekrCategoryPage} />\r\n\t\t\t\t\t\t<Route path=\"/counter\" component={ZekrCounter} />\r\n\t\t\t\t\t\t<Route path=\"/favorites\" component={FavoritesPage} />\r\n\t\t\t\t\t\t<Route component={NotFoundPage} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Layout>\r\n\t\t\t</BrowserRouter>\r\n\t\t</Provider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\nfunction createBrowserHistory() {\r\n\tthrow new Error('Function not implemented.');\r\n}\r\n","import {} from 'react';\r\nimport { applyMiddleware, combineReducers, createStore, Store } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { AppSettings } from '../services/Settings/models/AppSettings';\r\nimport { UserInformation } from '../services/Settings/models/UserInformation';\r\nimport { rootReducer } from './Reducers/rootReducer';\r\n\r\nexport interface SettingsState {\r\n\treadonly loading: boolean;\r\n\treadonly settings: AppSettings | undefined;\r\n\treadonly userInformation: UserInformation | undefined;\r\n}\r\n\r\nexport interface AppState {\r\n\treadonly settingsState: SettingsState;\r\n}\r\n\r\nexport function configureStore(): Store<AppState> {\r\n\tconst store = createStore(rootReducer, undefined, applyMiddleware(thunk));\r\n\treturn store;\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n\tonSuccess?: (registration: ServiceWorkerRegistration) => void;\n\tonUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA',\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.warn('No internet connection found. App is running in offline mode.');\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport './zekr-app.scss';\r\nimport './zekr-material-ui-override.scss';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root'),\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}